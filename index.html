<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>记往开来</title>
  <meta name="author" content="Xiao Liu">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xiaoliuai.github.io/index.html">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="记往开来" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://xiaoliuai.github.io/index.html">
  <meta property="og:title" content="记往开来">
  

  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">记往开来</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:xiaoliuai.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="记往开来" />
    
    <meta itemprop="url" content="http://xiaoliuai.github.io" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-28T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-28-start-maven-example.html" itemprop="url">Start Maven Example</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Simple POM</a></li>
<li><a href="#sec-2">2. Basic command</a></li>
<li><a href="#sec-3">3. Directory layout</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-28-start-maven-example.html"><span class="section-number-2">1</span> Simple POM</a></h2>
<div class="outline-text-2" id="text-1">
<p>
Maven projects are defined with an XML file named <i>pom.xml</i>. This
file gives the project&#8217;s name, version, and dependencies that it
has on external libraries. Here is an <a href="http://spring.io/guides/gs/maven/#initial">example</a>.
</p>
<div class="org-src-container">

<pre class="src src-xml">&lt;?<span style="color: #859900;">xml</span> <span style="color: #6c71c4;">version</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">1.0</span><span style="color: #2aa198;">"</span> <span style="color: #6c71c4;">encoding</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">UTF-8</span><span style="color: #2aa198;">"</span>?&gt;
&lt;<span style="color: #b58900;">project</span> <span style="color: #6c71c4;">xmlns</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">http://maven.apache.org/POM/4.0.0</span><span style="color: #2aa198;">"</span> <span style="color: #6c71c4;">xmlns</span>:<span style="color: #6c71c4;">xsi</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">http://www.w3.org/2001/XMLSchema-instance</span><span style="color: #2aa198;">"</span>
    <span style="color: #6c71c4;">xsi</span>:<span style="color: #6c71c4;">schemaLocation</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd</span><span style="color: #2aa198;">"</span>&gt;
    &lt;<span style="color: #b58900;">modelVersion</span>&gt;4.0.0&lt;/<span style="color: #b58900;">modelVersion</span>&gt;
    &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework&lt;/<span style="color: #b58900;">groupId</span>&gt;
    &lt;<span style="color: #b58900;">artifactId</span>&gt;gs-maven&lt;/<span style="color: #b58900;">artifactId</span>&gt;
    &lt;<span style="color: #b58900;">packaging</span>&gt;jar&lt;/<span style="color: #b58900;">packaging</span>&gt;
    &lt;<span style="color: #b58900;">version</span>&gt;0.1.0&lt;/<span style="color: #b58900;">version</span>&gt;

    &lt;<span style="color: #b58900;">build</span>&gt;
        &lt;<span style="color: #b58900;">plugins</span>&gt;
            &lt;<span style="color: #b58900;">plugin</span>&gt;
                &lt;<span style="color: #b58900;">groupId</span>&gt;org.apache.maven.plugins&lt;/<span style="color: #b58900;">groupId</span>&gt;
                &lt;<span style="color: #b58900;">artifactId</span>&gt;maven-shade-plugin&lt;/<span style="color: #b58900;">artifactId</span>&gt;
                &lt;<span style="color: #b58900;">version</span>&gt;2.1&lt;/<span style="color: #b58900;">version</span>&gt;
                &lt;<span style="color: #b58900;">executions</span>&gt;
                    &lt;<span style="color: #b58900;">execution</span>&gt;
                        &lt;<span style="color: #b58900;">phase</span>&gt;package&lt;/<span style="color: #b58900;">phase</span>&gt;
                        &lt;<span style="color: #b58900;">goals</span>&gt;
                            &lt;<span style="color: #b58900;">goal</span>&gt;shade&lt;/<span style="color: #b58900;">goal</span>&gt;
                        &lt;/<span style="color: #b58900;">goals</span>&gt;
                        &lt;<span style="color: #b58900;">configuration</span>&gt;
                            &lt;<span style="color: #b58900;">transformers</span>&gt;
                                &lt;<span style="color: #b58900;">transformer</span>
                                    <span style="color: #6c71c4;">implementation</span>=<span style="color: #2aa198;">"</span><span style="color: #2aa198;">org.apache.maven.plugins.shade.resource.ManifestResourceTransformer</span><span style="color: #2aa198;">"</span>&gt;
                                    &lt;<span style="color: #b58900;">mainClass</span>&gt;hello.HelloWorld&lt;/<span style="color: #b58900;">mainClass</span>&gt;
                                &lt;/<span style="color: #b58900;">transformer</span>&gt;
                            &lt;/<span style="color: #b58900;">transformers</span>&gt;
                        &lt;/<span style="color: #b58900;">configuration</span>&gt;
                    &lt;/<span style="color: #b58900;">execution</span>&gt;
                &lt;/<span style="color: #b58900;">executions</span>&gt;
            &lt;/<span style="color: #b58900;">plugin</span>&gt;
        &lt;/<span style="color: #b58900;">plugins</span>&gt;
    &lt;/<span style="color: #b58900;">build</span>&gt;
&lt;/<span style="color: #b58900;">project</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li><code>&lt;modelVerion&gt;</code> POM model version
</li>
<li><code>&lt;groupId&gt;</code> Domain name of the group or organization.
</li>
<li><code>&lt;artifactId&gt;</code> Name to the project&#8217;s library artifact (name of
JAR file)
</li>
<li><code>&lt;version&gt;</code> Version of the project
</li>
<li><code>&lt;packaging&gt;</code> How it should be packaged (in JAR or WAR file)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Basic command</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<pre class="src src-bash">mvn compile
mvn package
mvn install
</pre>
</div>
<p>
The first command compiles the project, and the <i>.classfiles</i> shold be
in the <i>target/classes</i> directory.
The second command compile the code, run tests and finish by
packaging the code up in a JAR file in the <i>target</i> directory.
Tht third command does the same thing as the second command, then
copy the JAR file into the local <span class="underline">dependency repository</span>, under the
directories with name of groupId, artifactId and version. So on my
machine, its location is
<code>~/.m2/repository/org/springframework/gs-maven/0.1.0/gs-maven-0.1.0.jar</code>.
</p>

<p>
Add dependencies of project into the <i>pom.xml</i> file, in the
<code>&lt;project&gt;</code> element.
</p>
<div class="org-src-container">

<pre class="src src-xml">&lt;<span style="color: #b58900;">dependencies</span>&gt;
     &lt;<span style="color: #b58900;">dependency</span>&gt;
         &lt;<span style="color: #b58900;">groupId</span>&gt;joda-time&lt;/<span style="color: #b58900;">groupId</span>&gt;
         &lt;<span style="color: #b58900;">artifactId</span>&gt;joda-time&lt;/<span style="color: #b58900;">artifactId</span>&gt;
         &lt;<span style="color: #b58900;">version</span>&gt;2.2&lt;/<span style="color: #b58900;">version</span>&gt;
     &lt;/<span style="color: #b58900;">dependency</span>&gt;
 &lt;/<span style="color: #b58900;">dependencies</span>&gt;
</pre>
</div>
<p>
This description will tell the maven to get the <i>joda-time</i> package
as external library. You can specify a <code>&lt;scope&gt;</code> element to specify
if the dependencies are required for compiling the code but will be
provided during runtime by <code>provided</code>; or decalre the dependencies
are only necessary for compiling and running tests.
</p>

<p>
When I compile the command, <i>maven</i> downloads the <i>joda-time</i>
pakcage from <a href="https://repo.maven.apache.org/maven2/joda-time/">https://repo.maven.apache.org/maven2/joda-time/</a>. Does
the maven use its domain when the group id does not contain the
domain by default?
</p>

<p>
<b>You can also create a project from scratch</b>
</p>
<div class="org-src-container">

<pre class="src src-bash">mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Directory layout</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-bash">project
    src
        main
            java
            [scala]
            resources
                environment.properties
                environment.test.properties
                environment.prod.properties
                config
                    application.yml
                    application-dev.yml
                    application-[profile].yml
                [other]
        test
            java
            [scala]
    target
        classes
            the classes with the same structure as src/main
            the directories in src/main/resources
        test-classes
            the classes with the same structure as src/mainproject
        xxx.jar
    target
</pre>
</div>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-28T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-28-principles-of-reactive-programming-on-coursera.html" itemprop="url">Principles of Reactive Programming on Coursera</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Monad</a></li>
<li><a href="#sec-2">2. ScalaCheck &amp; ScalaTest</a>
<ul>
<li><a href="#sec-2-1">2.1. Tutorial of ScalaCheck</a></li>
<li><a href="#sec-2-2">2.2. ScalaTest</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-28-principles-of-reactive-programming-on-coursera.html"><span class="section-number-2">1</span> Monad</a></h2>
<div class="outline-text-2" id="text-1">
<p>
Honestly, I don&#8217;t understand it. But I collect my thoughts about it
here. First, the monda is used to chain operations and if the first
(preceding) operation fails, the whole chain stops. An example that
I understand is the usage of for-expression with pattern match. If
the pattern matches, go next operation, else skip this element.
</p>

<p>
Another point of view is about the unit operation. A monad flatMap
with its unit operation will return the monad itself.
</p>

<p>
<b>My conclusion</b>:
</p>

<p>
A monad is a container that supports operation chain and follows
the monad laws. The basic operations of this container are
<code>flatMap</code> and <code>unit</code>, where <code>flatMap</code> actually accepts a function
that maps each element to a container, then binds these containers
together; <code>unit</code> returns a container given an element. Monad laws
guarantee the reliability of operation chain on these contains.
</p>

<p>
Monad seems like a design pattern that enables the operation chain
along with pattern match in functional programming. Because
<code>flatMap</code> chain with different functions is equivalent to nested
<code>flatMap</code>, the for-expression is a syntax sugar based on <code>flatMap</code>
chain. The advantage of this design pattern is avoding side effect.
</p>

<p>
Generator is created by <code>yield</code> as well as
<b>for-expression</b>. Pay attention, there is no generator
class/type/trait. The genrator created through for-expression has
the same type of the sequence/iterator/stream used in
for-expression. That proves the for-expression is a syntax sugar of
monad types. So, guess what will happen when we create a
for-expression using both <b>list</b> and <b>stream</b>?
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">fibo</span>:Stream[Int] = 1 #:: 1 #:: fibo.zip(fibo.tail).map(x=&gt;x._1+x._2)
val l = List(1,2,3,4,5)
val lsg = <span style="color: #859900;">for</span>{x &lt;- l; fib &lt;- fibo} yield (x,fib)<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">infinite loop, crash the software/your machine</span>
val slg = <span style="color: #859900;">for</span>{fib &lt;- fibo; x &lt;- l} yield (x,fib)<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">return a stream</span>
</pre>
</div>
<p>
Following the definition of Monad, the first mixture <code>lsg</code> actually
makes <code>l flatMap (x =&gt; fibo)</code>, which returns a List that tries to
expand infinite stream <code>fibo</code>, hence block your machine. The second
mixture <code>slg</code> returns a Stream that expand the list <code>l</code>, hence,
works well. Besides, I have to clarify one thing: different monads
demonstrated above all accept <code>GenTraversableOnce</code> as parameter and
return monad of their own type. That is why they can be mixed
together and the first expression decides the type of the final
output of for-expression.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> ScalaCheck &amp; ScalaTest</h2>
<div class="outline-text-2" id="text-2">
<p>
It is a tool for property-based testing for scala. It has <b>NO</b>
external dependencies and integrated in the test frameworks
<b>ScalaTest</b>. It can also be used standalone, with its built-in test
runner.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Tutorial of ScalaCheck</h3>
<div class="outline-text-3" id="text-2-1">
<p>
First, create a class that extends class
<code>org.scalacheck.Properties</code> with the name of data object that you
want to test. It is used for the library to generate test data to
test your algorithm.
</p>

<p>
Second, create test case by
</p>
<div class="org-src-container">

<pre class="src src-java">property(<span style="color: #2aa198;">"NAME_OF_FUNCTION"</span>) = forAll{
    CONTAINER_OF_DATA =&gt; TEST_CASE_WITH_TARGET_FUNCTION
}
</pre>
</div>
<p>
<code>forAll</code> is the function <code>org.scalacheck.Prop.forAll</code>.
</p>

<p>
Third, to run the tests, you can put the properties in
<code>src/test/scala</code> then use test task to check them.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> ScalaTest</h3>
<div class="outline-text-3" id="text-2-2">
<p>
In the example provided by the oneline course, they used <b>JUnit</b>,
<b>ScalaTest</b> and <b>ScalaCheck</b> together, which is much more complext
than the tutorial. In their example, the class of <code>Properties</code> is
in <code>src/main/scala</code> and is called by another class defined under
<code>src/test/scala</code>. In the class under test folder, many instances
of the <code>Properties</code> class are created to check different children
classes of the target class.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">@RunWith</span>(<span style="color: #268bd2;">classOf</span>[JUnitRunner])
<span style="color: #859900;">class</span> <span style="color: #268bd2;">QuickCheckSuite</span> <span style="color: #859900;">extends</span> <span style="color: #268bd2;">FunSuite</span> with Checkers {
  <span style="color: #268bd2;">def</span> <span style="color: #b58900;">checkBogus</span>(p: Prop) {
    <span style="color: #268bd2;">var</span> <span style="color: #6c71c4;">ok</span> = <span style="color: #268bd2;">false</span>
    <span style="color: #859900;">try</span> {
      check(p)
    } <span style="color: #859900;">catch</span> {
      <span style="color: #859900;">case</span> e: TestFailedException =&gt;
        ok = <span style="color: #268bd2;">true</span>
    }
    assert(ok, <span style="color: #2aa198;">"A bogus heap should NOT satisfy all properties. Try to find the bug!"</span>)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Binomial heap satisfies properties."</span>) {
    check(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with BinomialHeap)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Bogus (1) binomial heap does not satisfy properties."</span>) {
    checkBogus(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with Bogus1BinomialHeap)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Bogus (2) binomial heap does not satisfy properties."</span>) {
    checkBogus(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with Bogus2BinomialHeap)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Bogus (3) binomial heap does not satisfy properties."</span>) {
    checkBogus(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with Bogus3BinomialHeap)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Bogus (4) binomial heap does not satisfy properties."</span>) {
    checkBogus(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with Bogus4BinomialHeap)
  }

  <span style="color: #b58900;">test</span>(<span style="color: #2aa198;">"Bogus (5) binomial heap does not satisfy properties."</span>) {
    checkBogus(<span style="color: #859900;">new</span> <span style="color: #268bd2;">QuickCheckHeap</span> with Bogus5BinomialHeap)
  }
}
</pre>
</div>
<ul class="org-ul">
<li>This class uses the junit framework for unittest. JUnit will
invoke the class with <code>@RunWith</code> annotation (extend by type
hierarchies) to run the tests. The annotation parameter in the
example is a class of the type <code>JUnitRunner</code>. In fact, any class
extends <code>Runner</code> is acceptabel. Notice that function <code>classOf</code>
acts the same as <code>obj.getClass()</code>.
</li>
<li>The annotation uses class of <code>JUnitRunner</code> as parameter. This
class is provided by scala-test framework.
</li>
<li>It is mentioned on <a href="http://www.scalatest.org/user_guide/using_the_scalatest_maven_plugin">ScalaTest Maven Plugin</a> that this annotaiton
is necessary to run the test without this plugin. So you can run
tests without this annotation by using this plugin.
<ul class="org-ul">
<li><b>Maven</b> Running tests with command <code>mvn test</code>. In fact, you
<b>cannot</b> run the tests with the example above. <b>Solution</b> is
to change the name <code>QuickCheckSuite</code> to <code>QuickCheckSuiteTest</code>
or <code>TestQuickCheckSuite</code> or <code>QuickCheckSuiteTestCase</code> to run
the tests. Even I did not explicitly specify plugin
<code>surefire</code>, maven uses this plugin to run test with my
configuration. By default, maven following name convertions
when looking for tests to run. So I have to change the name or
modify the <code>surefire</code> configuration to apply new name
convertion rules.
</li>
<li><b>ScalaTest</b> plugin. <b>TODO</b>
</li>
</ul>
</li>
<li><code>org.scalatest.FunSuite</code> and <code>org.scalatest.prop.Checkers</code>.
<b>TODO</b>
</li>
</ul>
</div>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-28T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-28-pom-configuration.html" itemprop="url">POM Configuration</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Identify our project</a></li>
<li><a href="#sec-2">2. Inheritance</a></li>
<li><a href="#sec-3">3. Tasks</a></li>
</ul>
</div>
</div>

<p>
See example  <a href="http://maven.apache.org/guides/introduction/introduction-to-the-pom.html">POM Configuration</a>.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-28-pom-configuration.html"><span class="section-number-2">1</span> Identify our project</a></h2>
<div class="outline-text-2" id="text-1">
<p>
Fully qualified name of project is
&#8220;&lt;groupId&gt;:&lt;artifactId&gt;:&lt;version&gt;&#8221;. If <i>groupId</i> is a domain, it
will be transformed into directory path while downloading. Download
something with <i>groupId=org.X.A</i> from <i>url.com</i> will download
things from <i>url.com/org/X/A</i> in the end.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Inheritance</h2>
<div class="outline-text-2" id="text-2">
<p>
When we have two projects, A and B, A is supposed to be parent
project of B. You have to specify the <i>pom.xml</i> of project B to
indicate that the <i>parent</i> of B is A with the <i>groupId</i>,
<i>artifactId</i> and <i>version</i> of A. You can remove the <i>groupId</i> and
<i>version of B to make A and B have the same /groupId</i> and
<i>version</i>. One can also indicate the <code>&lt;relativePath&gt;</code> for parent
project to put the A and B in the same directory level.
</p>

<p>
B inherite the dependencies from A.所以parent用来继承POM,dependency
用来解决代码依赖. <b>parent的项目在代码上没有关系.</b>
</p>

<p>
The packages downloaded by <i>maven</i> are put under
<i>HOME</i>.m2/repository/.
</p>

<p>
所有 <i>POM.xml</i> 里面的元素都可以用 <code>${project.A.B.C}</code> 的方式进行引用.比
方说如果在 <i>XML</i> 根路径下有这样的结构
<code>&lt;A&gt;&lt;B&gt;lalala&lt;C&gt;blabla&lt;C/&gt;&lt;/B&gt;&lt;/A&gt;</code>, <code>${project.A.B.C}</code> 就等于
<code>blabla</code>.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Tasks</h2>
<div class="outline-text-2" id="text-3">
<p>
首先,maven可以使用一系列的plugin来支持各种功能,包括发布,运行测试等
等.在使用 <code>spring-boot-maven-plugin</code> 的时候,可以用 <code>mvn
   spring-boot:run</code> 来运行程序. <code>spring-boot</code> 应该是plugin的名字, <code>run</code>
则是定义好的task. 在使用 <code>maven-scala-plugin</code> 的时候,如果加入以下设
置
</p>
<div class="org-src-container">

<pre class="src src-xml">&lt;<span style="color: #b58900;">executions</span>&gt;
    &lt;<span style="color: #b58900;">execution</span>&gt;
        &lt;<span style="color: #b58900;">goals</span>&gt;
            &lt;<span style="color: #b58900;">goal</span>&gt;compile&lt;/<span style="color: #b58900;">goal</span>&gt;
            &lt;<span style="color: #b58900;">goal</span>&gt;testCompile&lt;/<span style="color: #b58900;">goal</span>&gt;
        &lt;/<span style="color: #b58900;">goals</span>&gt;
    &lt;/<span style="color: #b58900;">execution</span>&gt;
&lt;/<span style="color: #b58900;">executions</span>&gt;
</pre>
</div>
<p>
运行 <code>mvn scala:testCompile</code> 则只会编译test部分的代码.
</p>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-28T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-28-functional-programming-on-coursera.html" itemprop="url">Functional Programming on Coursera</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Lambda function</a></li>
<li><a href="#sec-2">2. Type hierachy</a></li>
<li><a href="#sec-3">3. Pattern match</a></li>
<li><a href="#sec-4">4. Implicit</a>
<ul>
<li><a href="#sec-4-1">4.1. Implicit Parameter</a></li>
<li><a href="#sec-4-2">4.2. Implicit Function</a></li>
<li><a href="#sec-4-3">4.3. Implicit Class</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Collections</a></li>
<li><a href="#sec-6">6. Stream, Iterator, Generator and <code>lazy</code></a>
<ul>
<li><a href="#sec-6-1">6.1. Stream</a></li>
<li><a href="#sec-6-2">6.2. Iterator</a></li>
<li><a href="#sec-6-3">6.3. <code>lazy val</code></a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-28-functional-programming-on-coursera.html"><span class="section-number-2">1</span> Lambda function</a></h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>function is value,
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">f</span> = (x:Int) =&gt; x*x
</pre>
</div>
<p>
One difference between <code>def f = ...</code> and <code>val f = ...</code> is: <code>def</code>
is evaluated on call and returns a new function instance every
time.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">val</span> <span style="color: #b58900;">test</span>: () =&gt; Int = {
    println(<span style="color: #2aa198;">"val"</span>)
    val r = <span style="color: #268bd2;">util</span>.Random.nextInt
    () =&gt; r
}
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">returns the same result every time you call test(),</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">"val" will be printed after definition</span>

<span style="color: #268bd2;">def</span> <span style="color: #b58900;">test</span>: () =&gt; Int = {
    println(<span style="color: #2aa198;">"def"</span>)
    val r = <span style="color: #268bd2;">util</span>.Random.nextInt
    () =&gt; r
}
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">returns the difference results every time you call test(),</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">"def" will be printed every time you call it.</span>

<span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">tt</span> = test
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">acts like the first example</span>

val test = () =&gt; <span style="color: #268bd2;">util</span>.Random.nextInt
def test = () =&gt; <span style="color: #268bd2;">util</span>.Random.nextInt
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">they are the same from behavior, you have to call the function by test()</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">the def declaration actually defined a function that returns a function.</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">if you type test without parenthesis, you will receive a function value.</span>

def test = <span style="color: #268bd2;">util</span>.Random.nextInt
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">this line directly assign the test function to the nextInt function,</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">you can call the function directly by name without the parenthesis</span>
</pre>
</div>
<p>
method/expression starts by <code>def</code> will be evaluated when you call
<code>obj.f</code> while those starts by <code>val</code> will be evaluated
once. In addition, if you declare a <code>val</code> that assigns to <code>def</code>,
the <code>def</code> will be evaluated immediately, and the new <code>val</code> acts
like the first case in the examples above.
</p>
</li>
<li>Abbreviation:
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">l</span> = List(1,2,3)
l.map((x) =&gt; x*x)
l.map( x =&gt; x*x) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">ignore the parenthese</span>
l.map( _ % 2 == 0) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">ignore the parameter, using the placeholder for expression</span>
l.map(f(_)) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">using the placeholder for function</span>
l.map(f) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">ignore the placeholder for function</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Type hierachy</h2>
<div class="outline-text-2" id="text-2">
<p>
abstract class is like Java, trait is like interface in
Java. However, trait can have parameters and defined methods. In
addition, trait is not abstract class since it cannot has
constructors.
</p>
<ul class="org-ul">
<li>Logical problem: is List&lt;Parent&gt; the parent of List&lt;Childe&gt;?

<p>
It is not true for mutable collection.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">var</span> <span style="color: #6c71c4;">s</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">Array</span>[Man](<span style="color: #859900;">new</span> <span style="color: #268bd2;">Man</span>())
var t:Array[Human] = s
t[0] = <span style="color: #859900;">new</span> <span style="color: #268bd2;">Woman</span>()
var m:Man = s[0]<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">what is it? man or woman?</span>
</pre>
</div>
<p>
But we can use imutable collection.
</p>
</li>

<li>Covariant, Contvariant, Invariant
<ul class="org-ul">
<li>Covariant: defined by Class&lt;+T&gt;, Class&lt;Parent&gt; is the parent of
Class&lt;Child&gt;
</li>

<li>Contvariant: defined by Class&lt;-T&gt;, Function&lt;Parent&gt; is the
child of Function&lt;Child&gt;
</li>
</ul>
<p>
The principle is: child type can do anything that can be done by
parent type.
</p>
</li>

<li>Check Rules and Boundary

<p>
To avoid conflict, the compile force the +T can only be used for
returned type, the -T can only be used for argument type. A
method to by pass this problem is using boundary.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #859900;">class</span> <span style="color: #268bd2;">List</span>&lt;+T&gt;{
     <span style="color: #268bd2;">def</span> <span style="color: #6c71c4;">prepend</span>[U &gt;: T](<span style="color: #268bd2;">U</span> <span style="color: #6c71c4;">elem</span>)
}
</pre>
</div>
<p>
Notice that in generic type definition, one can use <code>A&gt;:B</code> and
<code>A&lt;:B</code> to add constraint to the meta type.
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Pattern match</h2>
<div class="outline-text-2" id="text-3">
<p>
Case class enables you to make classes with different parameters
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #859900;">abstract</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">CodeTree</span>
<span style="color: #859900;">case</span> <span style="color: #859900;">class</span> Fork(left: CodeTree, right: CodeTree, chars: List[Char], weight: Int) <span style="color: #859900;">extends</span> <span style="color: #268bd2;">CodeTree</span>
<span style="color: #859900;">case</span> <span style="color: #859900;">class</span> Leaf(<span style="color: #268bd2;">char</span>: Char, weight: Int) <span style="color: #859900;">extends</span> <span style="color: #268bd2;">CodeTree</span>
</pre>
</div>
<p>
For the classes listed above, you cannot directly access to any
paramter (field) of <code>Fork</code> or <code>Leaf</code>. You have to use <code>case
   Fork(a,b,_,_)</code> to access to the paramters.
</p>

<p>
<code>case</code> match can also be used in lambda function as a short
version.
</p>
<div class="org-src-container">

<pre class="src src-java">List.map(p =&gt; p._1 * p._2)

List.map({<span style="color: #859900;">case</span> (x,y) =&gt; x * y})
<span style="color: #93a1a1; font-style: italic;">//</span><span style="color: #93a1a1; font-style: italic;">List.map{case (x,y) =&gt; x * y} also works</span>
</pre>
</div>

<p>
Option calsss used for the condition that the returned type can be
empty/null, etc.
</p>

<p>
If you want to match a variable in context, you have to weither use
a capitalized variable name <code>Variable</code> or wrap it by backticks
<code>`variable`</code>.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Implicit</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Implicit Parameter</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Implicit parameter looks similar to default parameter, but their
principles are completely different. Default parameter has a
default value to be used when the parameter is not given. Implicit
parameter will search the context to get an appropriate
value/variable as parameter.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #859900;">abstract</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">Logger</span> {<span style="color: #268bd2;">def</span> <span style="color: #b58900;">log</span>(s: String)}
<span style="color: #859900;">class</span> <span style="color: #268bd2;">FileLogger</span> <span style="color: #859900;">extends</span> <span style="color: #268bd2;">Logger</span> {
  <span style="color: #268bd2;">def</span> <span style="color: #b58900;">log</span>(s: String) {println(<span style="color: #2aa198;">"Log in file: "</span> + s)}
}
<span style="color: #859900;">class</span> <span style="color: #268bd2;">StdoutLogger</span> <span style="color: #859900;">extends</span> <span style="color: #268bd2;">Logger</span> {
  <span style="color: #268bd2;">def</span> <span style="color: #b58900;">log</span>(s: String) {println(<span style="color: #2aa198;">"Stdout: "</span> + s)}
}

<span style="color: #268bd2;">def</span> <span style="color: #b58900;">Add</span>(a: Int, b: Int)(<span style="color: #268bd2;">implicit</span> <span style="color: #6c71c4;">logger</span>: Logger) {
  <span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">sum</span> = a + b
  logger.log(<span style="color: #2aa198;">"%d + %d = %d"</span>.format(a, b, sum ))
}

<span style="color: #268bd2;">implicit</span> <span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">log</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">FileLogger</span>

Add(1,2)
Add(2,3)(<span style="color: #859900;">new</span> <span style="color: #268bd2;">StdoutLogger</span>) <span style="color: #93a1a1; font-style: italic;">//</span><span style="color: #93a1a1; font-style: italic;">you may do it explicitly</span>
</pre>
</div>
<p>
If there is no <code>implicit val log = new FileLogger</code>, the compiler
will report error. <i>It is similar to injection by type.</i>
</p>

<p>
Question: what if there are two possible candidates in the context?
</p>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Implicit Function</h3>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Implicit Class</h3>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Collections</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>List is a chain while Vector is a tree that each node is an array
that contains 32 elements. Vector groups in depth slowly
<code>log_{32}(N)</code>. Important functions: <code>map</code>, <code>filter</code>,
<code>reduceRight</code>, <code>reduceLeft</code>, <code>foldRight</code>, <code>foldLeft</code>, <code>flatten</code>,
<code>flatMap</code>, <code>take</code>, <code>drop</code>, <code>takeWhile, =dropWhile</code>, <code>span</code>,
<code>group</code>, <code>groupBy</code>.

<p>
Sequence as parameter list is represented by <code>this(par: T*)</code>.
</p>
</li>
<li>Map.
<ul class="org-ul">
<li>The <code>+</code> and <code>++</code> operations overwrite the existing key.
</li>
<li>Initialized by <code>Map(k1-&gt;v1, k2-&gt;v2, k3-&gt;v3)</code>
</li>

<li>Set default value by <code>withDefaultValue</code>, this function returns
a new map (everything in this course are immutable).
</li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Stream, Iterator, Generator and <code>lazy</code></h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Stream</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Stream, acts like sequence, but it does not evaluate until be
called. It can be used to ignore unecessary computation and coding
infinite concepts.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #268bd2;">val</span> <span style="color: #6c71c4;">fibo</span>:Stream[Int] = 1 #:: 1 #:: fibo.zip(fibo.tail).map(x=&gt;x._1+x._2)
println(fibo.take(10).toList)

def from(n: Int): Stream[Int] = n #:: from(n+1) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">infinite integer stream starts from n</span>
<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">recursive stream</span>
def sieve(s: Stream[Int]): Stream[Int] =
   s.head #:: sieve(s.<span style="color: #268bd2;">tail</span> <span style="color: #6c71c4;">filter</span> (_ % s.head !=0)) <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">stream of primes &#36136;&#25968;</span>

val primes = sieve(from(2))
primes.take(10).toList <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">the first 10 primes starts from 2.</span>
</pre>
</div>

<p>
Three ways of using stream
</p>
<ul class="org-ul">
<li>Transform from other collections, then you use functions like
map, etc. to generate new stream.
</li>
<li><code>elem #:: Stream</code>
</li>
<li>Transform from iterator, use for loop to create an iterator with
what you want and then convert it into a stream.
</li>
</ul>

<p>
Because Stream has consistent API as List/Seq/Vector, you can use
it as if you have a collection that contains everything.
</p>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Iterator</h3>
<div class="outline-text-3" id="text-6-2">
<p>
The difference between stream and iterator is stream memories the
values while iterator doesn&#8217;t.
</p>

<p>
Iterator can be used in for-expression. For-expression can
also use <b>pattern match</b>.
</p>
<div class="org-src-container">

<pre class="src src-java"><span style="color: #859900;">for</span>{ pattern(x) &lt;- seq; pattern2(y) = x(k); ...} yield ...
</pre>
</div>
<p>
As show in the example above, you can apply pattern to loop on the
elements of sequence, you can even add some simple statements in
the for-expression. It is equivalent to:
</p>
<div class="org-src-container">

<pre class="src src-java">seq.withFilter({<span style="color: #859900;">case</span> pattern(x) =&gt; <span style="color: #268bd2;">true</span>; <span style="color: #859900;">case</span> _ =&gt; <span style="color: #268bd2;">false</span>})
   .map({<span style="color: #859900;">case</span> pattern(x) =&gt; x(k)})
   .withFilter({<span style="color: #859900;">case</span> pattern2(y) =&gt; <span style="color: #268bd2;">true</span>; <span style="color: #859900;">case</span> _ =&gt; <span style="color: #268bd2;">false</span>})
   .map({<span style="color: #859900;">case</span> pattern2(y) =&gt; y})
   ...
</pre>
</div>
<p>
The function <code>withFilter</code> returns a <code>FilterMonadic</code>, which
provides four functions <code>flatMap</code>, <code>map</code>, <code>foreach</code>,
<code>withFilter</code>. It works like list of call backs in programming
point of view.
From wikipedia:
/In functional programming, a monad is a structure that represents computations defined as sequences of steps: a type with a monad structure defines what it means to chain operations, or nest functions of that type together.
</p>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> <code>lazy val</code></h3>
<div class="outline-text-3" id="text-6-3">
<p>
<code>lazy val</code> is only evaluated once when called. You can also define
a lazy parameter by <code>def myFUnc[T](param: =&gt; T)</code>, then the
parameter will be evaluated when it is called in <code>myFunc</code> if the
param is returned by an expression/function.
</p>
</div>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-17T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-17-mongodb-strategy.html" itemprop="url">Mongodb Strategy</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Two-phase commits</a></li>
<li><a href="#sec-2">2. Concurrency control</a></li>
<li><a href="#sec-3">3. Model</a>
<ul>
<li><a href="#sec-3-1">3.1. Relationships between documents</a>
<ul>
<li><a href="#sec-3-1-1">3.1.1. One-to-One Embeded</a></li>
<li><a href="#sec-3-1-2">3.1.2. One-to-Many Embeded/References</a></li>
</ul>
</li>
<li><a href="#sec-3-2">3.2. Tree Structures</a>
<ul>
<li><a href="#sec-3-2-1">3.2.1. References</a></li>
<li><a href="#sec-3-2-2">3.2.2. Nested Sets</a></li>
</ul>
</li>
<li><a href="#sec-3-3">3.3. Index</a></li>
<li><a href="#sec-3-4">3.4. Others</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-17-mongodb-strategy.html"><span class="section-number-2">1</span> Two-phase commits</a></h2>
<div class="outline-text-2" id="text-1">
<p>
Two-phase commits is used to update multiple documents as a fake
atomic operation. The principle of two-phase commits is creating
temporary, inter-media records to support rollback operations
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Concurrency control</h2>
<div class="outline-text-2" id="text-2">
<p>
The first method is adding a label to indicate the current accessing
application.
</p>

<p>
The second method is using the old value of files to update as a part
of query to ensure that the target fields of current document is
not updated.
</p>
<div class="org-src-container">

<pre class="src src-javascript"><span style="color: #859900;">var</span> <span style="color: #6c71c4;">myDoc</span> = db.COLLECTION.findOne<span style="color: #657b83;">(</span>condition<span style="color: #657b83;">)</span>;
<span style="color: #859900;">if</span><span style="color: #657b83;">(</span>myDoc<span style="color: #657b83;">){</span>
   <span style="color: #859900;">var</span> <span style="color: #6c71c4;">oldValue</span> = myDoc.value;
   <span style="color: #859900;">var</span> <span style="color: #6c71c4;">results</span> = db.COLLECTION.update<span style="color: #2aa198;">(</span>
       <span style="color: #b58900;">{</span>
           _id: myDoc._id,
           value: oldValue
       <span style="color: #b58900;">}</span>,
       <span style="color: #b58900;">{</span>
           $inc:<span style="color: #859900;">{</span>value: -fee<span style="color: #859900;">}</span>
       <span style="color: #b58900;">}</span>
       <span style="color: #2aa198;">)</span>
<span style="color: #657b83;">}</span>
</pre>
</div>
<p>
Another possible option is: if you want to deduct an amount of
money from an account and the rest money should not be negative,
you can use following commands:
</p>
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span><span style="color: #2aa198;">{</span>_id: id, value: <span style="color: #b58900;">{</span>$gte: fee<span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span>, <span style="color: #2aa198;">{</span>$inc:<span style="color: #b58900;">{</span>value: -fee<span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
It means the account will be updated only if the value is enough.
</p>

<p>
The third method is add an unique field (<i>version</i>) to the
document.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Model</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Relationships between documents</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><span class="section-number-4">3.1.1</span> One-to-One Embeded</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
Example: <i>patron</i> and <i>address</i>. User informations should be put
together, such as the account info (password, email) and
application relative info (balance in account).
</p>
</div>
</div>

<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2"><span class="section-number-4">3.1.2</span> One-to-Many Embeded/References</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
It is used for <i>one-to-few</i> such as the authors of a book. One
can use array in a document to model such relations. However, if
the values of embedded elements are few, it is better to save them
in another documents using references. For example, the
publishers of books. Another principle is DO NOT create large
arrays in document. Large arrays in document is inefficient for
three reasons:
</p>
<ul class="org-ul">
<li>When document size is increased, the MongoDB will move the
document, which lead to rewriting the entire document.
</li>
<li>Indexing the elements in array is inefficient.
</li>
<li>Query a large document for a small part of array is
inconvenient.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Tree Structures</h3>
<div class="outline-text-3" id="text-3-2">
</div><div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><span class="section-number-4">3.2.1</span> References</h4>
<div class="outline-text-4" id="text-3-2-1">
<ul class="org-ul">
<li>Parent Refs.

<p>
Save each node as a document that contains the reference to the
parent
</p>
</li>

<li>Child Refs

<p>
Save each node as document that contains an array of references
to children nodes.
</p>
</li>

<li>Extension

<p>
It is also useful to add additional relations such as ancestors
of nodes into the document.
</p>

<p>
Another way to accelerate the searching of a tree is
<i>materialize paths</i>. This method add a <code>path</code> attribute that
describe the path using a string. Searching such string requires
using of regular expression, but is faster than the previous
solution.
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-2-2" class="outline-4">
<h4 id="sec-3-2-2"><span class="section-number-4">3.2.2</span> Nested Sets</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
This method is tricky. It likes a binary tree that use values to
indicate the relative nodes.
</p>
<div class="org-src-container">

<pre class="src src-javascript"> db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"Books"</span>, parent: 0, left: 1, right: 12 <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>
 db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"Programming"</span>, parent: <span style="color: #2aa198;">"Books"</span>, left: 2, right: 11 <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>
 db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"Languages"</span>, parent: <span style="color: #2aa198;">"Programming"</span>, left: 3, right: 4 <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>
 db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"Databases"</span>, parent: <span style="color: #2aa198;">"Programming"</span>, left: 5, right: 10 <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>
&#65532;db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"MongoDB"</span>, parent: <span style="color: #2aa198;">"Databases"</span>, left: 6, right: 7 <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>
 db.categories.insert<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"dbm"</span>, parent: <span style="color: #2aa198;">"Databases"</span>, left: 8, right: 9<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>

 <span style="color: #859900;">var</span> <span style="color: #6c71c4;">databaseCategory</span> = db.categories.findOne<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> _id: <span style="color: #2aa198;">"Databases"</span> <span style="color: #2aa198;">}</span> <span style="color: #657b83;">)</span>;
 db.categories.find<span style="color: #657b83;">(</span> <span style="color: #2aa198;">{</span> left: <span style="color: #b58900;">{</span> $gt: databaseCategory.left <span style="color: #b58900;">}</span>, right: <span style="color: #b58900;">{</span> $lt: databaseCategory.right <span style="color: #b58900;">}</span> <span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
One can retrieve the children nodes by using the left and right
indicators.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Index</h3>
<div class="outline-text-3" id="text-3-3">
<p>
One of the main benefit of indexing is sorting, the application
can quickly find the matched document by traveling through the
ordered indices very quickly
</p>
<ul class="org-ul">
<li>Single field index
</li>
<li>Compound key index<br  />
      Note that if one set compound index by
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.ensureIndex<span style="color: #657b83;">(</span><span style="color: #2aa198;">{</span>key1: 1, key2: -1<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
It can help the <code>sort</code> funciton using <code>{key1: 1, key2: -1}</code>,
<code>{key1: -1, key2: 1}</code>, but cannot help sorting with the key
<code>{key1: 1, key2: 1}</code>.
</p>
</li>
<li>Multi-key index<br  />
      It refers to using array as index. You cannot using compound key
for two arrays.
</li>
<li>Hased index<br  />
      It is not compatible with multi-key index.
</li>
<li>Geospatial index<br  />
      This index is used to index the geometric data, such as lines,
points, shapes.
</li>
<li>Text index<br  />
      Support text search with language stop words, will use very
large space.
</li>
<li>Hashed index<br  />
      Compute the hash for entire document while <b>??collapse??</b> the
sub-document.
</li>
</ul>

<p>
Index also support properties like:
</p>
<ul class="org-ul">
<li><i>TTL</i> index is used to remove outdated index
</li>
<li><i>Uniqu</i> index, which reject duplicate value of indexed filed for all the document. ??Can we use it to ensure that
elements in array has unique value in document (can be repeat in
different document)??
</li>
<li><i>Sparse</i> index, documents without the field are not indexed. By
default, these documents will be indexed to null.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Others</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>Atomic operation
<code>update</code>, <code>findAddUpdate</code>, <code>remove</code> are atomic. Put fields in one
document can ensure the write operations are atomic.
</li>

<li>Support keyword search
Putting strings in an array, then create a multi-key index
enables keyword search.

<p>
Keyword search cannot provide NLP/IE functions, such as
stemming, synonyms, ranking, which are usually required by
search engine.
</p>
</li>

<li>Document limit

<ul class="org-ul">
<li>Field names cannot start with <code>$</code>, cannot contain <code>.</code>, cannot
contain <code>null</code>.
</li>

<li>Field value has a maximum index key length limit to be used as
index.
</li>

<li>Maximum document size is 16M. GridFS supports large file,
which is represented by a group of files that contain
different pieces of contents.
</li>

<li><code>_id</code> field may be any BSON data type except the array. It is
<code>ObjectId</code> by default.
</li>
</ul>
</li>

<li>DBRef

<p>
DBRefs are used to representing a document rather a specific
reference type. It contains the name of collection (optional:
database name).
</p>
</li>
</ul>
</div>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-02-14T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-02-14-basic-mongodb-instructions.html" itemprop="url">Basic Mongodb Instructions</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Insert</a></li>
<li><a href="#sec-2">2. Find</a></li>
<li><a href="#sec-3">3. Select</a></li>
<li><a href="#sec-4">4. Update</a></li>
<li><a href="#sec-5">5. Remove</a></li>
<li><a href="#sec-6">6. Commands</a></li>
<li><a href="#sec-7">7. Query Cursor Methods</a></li>
<li><a href="#sec-8">8. MapReduce</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-02-14-basic-mongodb-instructions.html"><span class="section-number-2">1</span> Insert</a></h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.insert<span style="color: #657b83;">(</span>doc/docs<span style="color: #657b83;">)</span>
</pre>
</div>
<p>
You can insert one document or a list of documents.  When you
insert a list of documents, the operation is not atomic.  The
returned result shows the statistics of the write operations
including the write errors and the number of successfully inserted
documents.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Find</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.find<span style="color: #657b83;">(</span><span style="color: #2aa198;">{</span>name: value, <span style="color: #2aa198;">'name1.name2.name3'</span>:value/condition<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
Check all the elements in array when &#8216;name#&#8217; corresponds to
array. Special conditions
</p>
<ul class="org-ul">
<li><code>$in, $ne, $nin, $lt, $gt, $lte, $gte</code>
</li>
<li><code>$and, $or, $not, $nor</code>
</li>
<li><code>$exists, $type</code>
</li>
<li><code>$regex, $text, $where, $mod</code>
</li>
<li><code>$all, $elemMatch, $size</code>
</li>
<li><code>$, $slice</code>
</li>
</ul>

<p>
Difference between with/without <code>$elemMatch</code> is that: <code>$elemMatch</code>
restrict that one element in array should match all the conditions,
while without <code>$elemMatch</code>, different elements in the array can
match different part of the conditions.
</p>

<p>
Match <b>element</b> / <b>array</b> can be done by query <code>{name: value}</code> when value
is a single <b>variable/object</b> or an <b>array</b>.
</p>

<p>
Elements in array can be retrieved by index
<code>db.COLLECTION.find({'name.0': value})</code>.
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Select</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>get attribute
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.find<span style="color: #657b83;">(</span>***, <span style="color: #2aa198;">{</span>name:1<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
</li>
<li>get elements in array
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.find<span style="color: #657b83;">(</span>***, <span style="color: #2aa198;">{</span><span style="color: #2aa198;">'name1.name2'</span>:1<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
This projection will returns all the elments with the path
&#8216;name1.name2&#8217; when any one in the path represents an array.
</p>

<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.find<span style="color: #657b83;">(</span>***, <span style="color: #2aa198;">{</span>name1: <span style="color: #b58900;">{</span>$elemMatch: <span style="color: #859900;">{</span>name2:value<span style="color: #859900;">}</span><span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
<code>$elemMatch</code> can be used in the second argument to limit the
returned elements in array. However, it <b>CANNOT</b> be used in nested
array and only returns the <b>FIRST</b> element.
</p>
</li>
<li>get elements in nested array.

<p>
<b>Aggregation framework/unwind.</b>
Aggregations are operations that process data records and return
computed results.
<b>Pipeline</b>
</p>

<p>
You can expand the nested arrays by several <code>$unwind</code>
operations to get a large number of documents that each one
contains a single combination of elements in different levels
of nested arrays. Then match the elements you need and maybe
regroup them together. However, if you want to aggregate the
matched elements in nested arrays into array after <code>$unwind</code>
operation, it is very complex.
</p>

<p>
However, you can just return the tasks by <code>$group</code> operation
that matches, for example, the nested element attributes.
</p>
</li>
</ul>
</div>
</div>



<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Update</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>update attribute:
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span>find condition, <span style="color: #2aa198;">{</span>$set: <span style="color: #b58900;">{</span>name: value<span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
<code>$inc</code> increase number, etc. <code>upsert</code> will insert element when it
does not exist in collection.
</p>
</li>
<li>update array:
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span>find condition, <span style="color: #2aa198;">{</span>$push/$pull: value<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-javascript">db.students.update<span style="color: #657b83;">(</span>
  <span style="color: #2aa198;">{</span> _id: 1 <span style="color: #2aa198;">}</span>,
  <span style="color: #2aa198;">{</span>
  $push: <span style="color: #b58900;">{</span>
          scores: <span style="color: #859900;">{</span>
             $each: <span style="color: #268bd2;">[</span> <span style="color: #657b83;">{</span> attempt: 3, score: 7 <span style="color: #657b83;">}</span>, <span style="color: #657b83;">{</span> attempt: 4, score: 4 <span style="color: #657b83;">}</span> <span style="color: #268bd2;">]</span>,
             $sort: <span style="color: #268bd2;">{</span> score: 1 <span style="color: #268bd2;">}</span>,
             $slice: -3
          <span style="color: #859900;">}</span>
  <span style="color: #b58900;">}</span>

<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
The command above append 2 elements, then sort them by ascending
<i>score</i>, then keep the last 3 elements of the ordered array.
</p>
</li>
<li>update element in array:
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span><span style="color: #2aa198;">{</span><span style="color: #2aa198;">"name1.name2"</span>:value<span style="color: #2aa198;">}</span>, <span style="color: #2aa198;">{</span>$set:<span style="color: #b58900;">{</span><span style="color: #2aa198;">'name1.$.name2:value}})</span>
</pre>
</div>
<p>
It only works for one match.
</p>

<p>
If you want to update multiple elments, use forEach function.
</p>
<div class="org-src-container">

<pre class="src src-javascript">db.Projects.find<span style="color: #657b83;">()</span>.forEach<span style="color: #657b83;">(</span>
    <span style="color: #859900;">function</span><span style="color: #2aa198;">(</span><span style="color: #6c71c4;">pj</span><span style="color: #2aa198;">){</span>
        pj.groups.forEach<span style="color: #b58900;">(</span>
            <span style="color: #859900;">function</span><span style="color: #859900;">(</span><span style="color: #6c71c4;">gp</span><span style="color: #859900;">){</span>
                gp.tasks.forEach<span style="color: #268bd2;">(</span>
                    <span style="color: #859900;">function</span><span style="color: #657b83;">(</span><span style="color: #6c71c4;">task</span><span style="color: #657b83;">){</span>
                        <span style="color: #859900;">if</span> <span style="color: #2aa198;">(</span>task.name.match<span style="color: #b58900;">(</span><span style="color: #2aa198;">/update/</span><span style="color: #b58900;">)</span><span style="color: #2aa198;">){</span>
                            task.weight=5;
                        <span style="color: #2aa198;">}</span>
                    <span style="color: #657b83;">}</span><span style="color: #268bd2;">)</span>;
            <span style="color: #859900;">}</span><span style="color: #b58900;">)</span>;
        db.Projects.save<span style="color: #b58900;">(</span>pj<span style="color: #b58900;">)</span>;
    <span style="color: #2aa198;">}</span>
<span style="color: #657b83;">)</span>
</pre>
</div>
</li>
<li>update element in nested array.

<p>
<b>Impossible</b> for only one query. The issue is reported on 2010, but
is still there on 2015&#x2026;
</p>
</li>
</ul>

<p>
Functional key words:
</p>
<ul class="org-ul">
<li><code>$currentDate, $inc, $max, $min, $mul, $rename, $setOnInsert, $set, $unset</code>
</li>
<li><code>$, $addToSet, $pop, $pullAll, $pull, $pushAll, $push</code>
</li>
<li><code>$each, $position, $slice, $sort</code>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Remove</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>remove document
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.remove<span style="color: #657b83;">(</span>condition<span style="color: #657b83;">)</span>
</pre>
</div>
<p>
remove all documents when condition is not provided.
</p>
</li>
<li>remove colleciton
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.drop<span style="color: #657b83;">()</span>
</pre>
</div>
</li>
<li>remove database
<div class="org-src-container">

<pre class="src src-javascript">use DATABASE
db.dropDatabase<span style="color: #657b83;">()</span>
</pre>
</div>
</li>
<li>remove attribute
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span>find, <span style="color: #2aa198;">{</span>$unset: <span style="color: #b58900;">{</span>name: value<span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
value can be 1, &#8220;&#8221;, true/false.
</p>
</li>
<li>remove element in array
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.update<span style="color: #657b83;">(</span><span style="color: #2aa198;">{</span><span style="color: #2aa198;">"name1.name2"</span>:value<span style="color: #2aa198;">}</span>, <span style="color: #2aa198;">{</span>$unset:<span style="color: #b58900;">{</span><span style="color: #2aa198;">'name1.$.name2'</span>:1<span style="color: #b58900;">}</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Commands</h2>
<div class="outline-text-2" id="text-6">
<p>
<code>show dbs</code>
<code>use DB</code>
<code>show collection</code>
<code>help</code>
<code>db.help()</code>
<code>db.COLLECTION.help()</code>
</p>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Query Cursor Methods</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li><code>count()</code> // count of documents returned in a curcor
</li>
<li><code>explain()</code> // report
</li>
<li><code>hint()</code> // Forces MongoDB to use a specific index for a query
</li>
<li><code>limit()</code> // constraints size of returned results
</li>
<li><code>skip()</code> // skip the first number of documents
</li>
<li><code>sort()</code>
</li>
<li><code>toArray()</code>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> MapReduce</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">

<pre class="src src-javascript">db.COLLECTION.mapReduce<span style="color: #657b83;">(</span>mapFunction,
                        reduceFunction,
                        <span style="color: #2aa198;">{</span>
                            query: <span style="color: #2aa198;">"query performed at the beginning"</span>,
                            out: <span style="color: #2aa198;">"out collection name"</span>,
                            finalize: finalizeFunction
                        <span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
Query -&gt; map -&gt; reduce -&gt; finalize -&gt; out.
</p>
<ul class="org-ul">
<li>The <i>reduce</i> function muse return object with the same type of the output
of the <i>map</i> function.
</li>
<li>The order of emited elements should not affect the output of
reduce function.
</li>
<li>The reduce function must be <i>Idempotent</i>, which means
<i>f(f(x))=f(x)</i>.
</li>
</ul>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-01-30T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015-01-30-javascript-overview.html" itemprop="url">JavaScript Overview</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 后端</a></li>
<li><a href="#sec-2">2. 前端</a></li>
</ul>
</div>
</div>
<p>
在工具描述中,主要介绍经常用到的库,框架,前后端开发用到的平台.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2015-01-30-javascript-overview.html"><span class="section-number-2">1</span> 后端</a></h2>
<div class="outline-text-2" id="text-1">
<p>
<b>Node.js</b> 是一个JavaScript的平台,它提供了一个脱离浏览器的JavaScript运
行环境,同时也提供了一系列运行库和各种包. npm(nodejs package
manager)则是这各平台的包管理系统.它通过读取package.json文件来安装项
目所需的依赖(就跟maven的pom.xml一样).
</p>

<p>
<b>bower</b> ,是nodejs之中的一个组件,本身用来专门管理前端开发所需要的包
(JavaScript,CSS).它与npm的区别在于管理对象的不同以及bower使用的是扁
平化的依赖关系而npm使用树形依赖.bower读取bower.json来安装依赖.
</p>

<p>
<b>yoeman</b> , 安装时叫做 <b>yo</b>,是一个用来创建项目骨架的工具.它根据
yeoman-generator,也就是模板来创建文件架结构.模板需要用npm来安装,比
方说
</p>
<div class="org-src-container">

<pre class="src src-bash">npm install -g generator-gulp-angular
</pre>
</div>
<p>
模板名字以 <code>generator</code> 开头.
使用时运行
</p>
<div class="org-src-container">

<pre class="src src-bash">mkdir [app-name] &amp;&amp; cd $_
yo gulp-angular [app-name]
</pre>
</div>
<p>
来生成一个以generator-gulp-angular为模板的项目骨架,项目名字为
<code>[app-name]</code>. 就刚刚使用的这个模板为例,它在创建的时候会询问你需要什
么样的angular版本,哪一种CSS样式库(bootstrap, material),哪种angular
的实现方式(angular-strap),等等.
</p>

<p>
<b>grunt</b> / <b>gulp</b> 用来运行打包,压缩,发布等任务.在刚刚的例子中,我们使
用的是基于gulp的模板,所以要用gulp来运行以上任务.生成模板的事后,已经
在项目目录下建立了一个名为gulp的目录以及一个叫做gulpfile.js的文
件.gulp目录下面包含一系列js文件. gulpfile.js里面引入gulp库,定义一些
目录(src)的路径,并引入gulp目录,从而使得gulp目录下的js文件被gulp用来
进行相应的操作.这个模板的<a href="https://github.com/Swiip/generator-gulp-angular">github</a>说明上还指出一系列可选的特性,但是目
前看不出来在哪里定义的.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 前端</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Javascript
<ul class="org-ul">
<li><b>AngularJS</b>
</li>
<li><b>UI-Route</b>
</li>
</ul>
</li>

<li>UI Framework
<ul class="org-ul">
<li><b>Bootstrap</b>
</li>
<li><b>Angular Material</b>
</li>
</ul>
</li>

<li>CSS Preprocessor
<ul class="org-ul">
<li>Sass(Node.js)
</li>
<li>Less
</li>
</ul>
</li>

<li>JS Preprocessor
<ul class="org-ul">
<li>ES6
</li>
<li>TypeScript
</li>
<li>CoffeeScript
</li>
<li>AtScript
</li>
</ul>
</li>

<li>HTML template
<ul class="org-ul">
<li><code>.jade</code>
</li>
<li><code>.haml</code>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-12-25T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2014-12-25-angularjs-developer-guide-.html" itemprop="url">AngularJS Developer Guide 开发指南学习笔记</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Introduction &amp; Conceptual Overview</a></li>
<li><a href="#sec-2">2. DI</a></li>
<li><a href="#sec-3">3. Data Binding &amp; Scopes &amp; Template</a></li>
<li><a href="#sec-4">4. Module &amp; Provider</a>
<ul>
<li><a href="#sec-4-1">4.1. Service</a></li>
<li><a href="#sec-4-2">4.2. Controller</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Directive</a>
<ul>
<li><a href="#sec-5-1">5.1. 注册Directive</a></li>
<li><a href="#sec-5-2">5.2. restrict option</a></li>
<li><a href="#sec-5-3">5.3. link option</a></li>
<li><a href="#sec-5-4">5.4. isolate scope</a></li>
<li><a href="#sec-5-5">5.5. <i>transclude</i></a></li>
<li><a href="#sec-5-6">5.6. scope</a></li>
<li><a href="#sec-5-7">5.7. controller in directive.</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Filters</a></li>
<li><a href="#sec-7">7. Forms</a></li>
<li><a href="#sec-8">8. Expressions</a></li>
<li><a href="#sec-9">9. HTML Compiler</a></li>
<li><a href="#sec-10">10. Security</a></li>
<li><a href="#sec-11">11. i18n and l10n</a></li>
<li><a href="#sec-12">12. Accessibility</a></li>
<li><a href="#sec-13">13. Bootstrap</a></li>
<li><a href="#sec-14">14. Running in Production</a></li>
<li><a href="#sec-15">15. Animations</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2014-12-25-angularjs-developer-guide-.html"><span class="section-number-2">1</span> Introduction &amp; Conceptual Overview</a></h2>
<div class="outline-text-2" id="text-1">
<p>
HTML本身是静态的,对于现在的动态网页无能为力.为了弥合静态和动态之间
的鸿沟,有两种静态方式:库(<code>jQuery</code>),框架(<code>durandal</code>,
<code>ember</code>). <code>AngularJS</code> 则提供了第三种方式,通过数据绑定等方式让浏览
器学会新的语法. <code>AngularJS</code> 是完全基于前端的,适用于CRUD应用.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> DI</h2>
<div class="outline-text-2" id="text-2">
<p>
AngularJS中的模组类似于名字空间,在几乎所有东西都在名字空间下注册.这
些注册的东西是通过名字推断来进行绑定(引用)的.AngularJS自带的那功能,都
是可以直接引用的.自己定义的东西,也可以直接靠名字推定,但是要给模组
加上依赖关系.
</p>

<p>
<b>service</b>, <b>directive</b>, <b>filter</b> 都是通过 <code>factory/directive/filter</code> 方
法注册在模组中的,这些方法统称工厂(factory)方法.
</p>

<p>
我们可以通过 <code>config/run</code> 方法注册在模组配置和运行的时候需要运行的
函数,这些函数也同样的可以被以类似上面的方式来调用.这些方法被归类为
模组(module)方法.
</p>

<p>
控制器(<b>controller</b>),被解释为classes或者constructor function,同样需
要注册到模组中,通过名字来引用.
</p>

<p>
这些东西在引用的时候,可以直接当函数参数名,可以用 <i>$inject</i> 来显示
说明,也可以用数组.后两种基本上是在第一种的基础上多写些代码来说明.直
接用函数参数名是最简单的,但是不被官方所推荐.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Data Binding &amp; Scopes &amp; Template</h2>
<div class="outline-text-2" id="text-3">
<p>
传统模板是通过模板Tempalte和模型Model来建立视图View. AngularJS是通过模
板建立起View和Model的对应,让View跟Model直接互动.
AngularJS中,template是包含AngularJS元素和属性的HTML.template中可用
的AngularJS元素和属性为 <i>Directive</i>, <i>Markup</i> (<code></code>), <i>Filter</i>,
<i>Form controls</i>.通过这些template,JS(model)和(view)被连接了起来(数
据绑定).
</p>

<p>
上下文(Scope)提供表达式的运行环境,它被组织成一个类似DOM的层级结构.上
下文监视表达式并传递事件.API($watch)监视模型的变更,($apply)将任意
由Angular之外的事件对模型的改变传递到View.这里所谓的Angular之外的
事件,指的是controllers,services,event handlers.
</p>

<p>
上下文之间可以嵌套,嵌套的上下文有两种 <i>child scope</i> 和 <i>isolate
scope</i>, <i>child scope</i> 继承上层上下文的内容, <i>isolate scope</i> 不继承.
如果上下文中没有对应的属性,表达式是没有任何作用的.
</p>

<p>
上下文可以看做将应用控制器controller和视图view联系起来的胶水.
<span class="underline">在template连接的时候,directive会设置上下文中的$watch,$watch会通知
directive任何属性的变更,从而使directive能根据更新的数据来渲染DOM</span>
控制器controller和directive都能直接访问scope,但是不能直接访问对方.这
种设计孤立controller和directive. <code>$rootScope</code> 提供对root上下文的访
问,一般指向ng-app所在的范围.
</p>

<p>
如果用chrome的inspect element功能查看页面元素,会发现
<code>class="ng-scope ng-binding"</code>之类的属
性.Anuglar会自动将 <i>ng-scope</i> 加入制定了上下文的元素, <i>ng-binding</i>
则说明这里面的内容是用绑定实现的.
</p>

<p>
在不同层级使用同一个controller,
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">div</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"EventController"</span>&gt;
  Root scope &lt;<span style="color: #b58900;">tt</span>&gt;<span style="color: #657b83; background-color: #fdf6e3;">MyEvent</span>&lt;/<span style="color: #b58900;">tt</span>&gt; count: 
  &lt;<span style="color: #b58900;">ul</span>&gt;
    &lt;<span style="color: #b58900;">li</span> <span style="color: #6c71c4;">ng-repeat</span>=<span style="color: #2aa198;">"i in [1]"</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"EventController"</span>&gt;
      &lt;<span style="color: #b58900;">button</span> <span style="color: #6c71c4;">ng-click</span>=<span style="color: #2aa198;">"$emit('MyEvent')"</span>&gt;$emit('MyEvent')&lt;/<span style="color: #b58900;">button</span>&gt;
      &lt;<span style="color: #b58900;">button</span> <span style="color: #6c71c4;">ng-click</span>=<span style="color: #2aa198;">"$broadcast('MyEvent')"</span>&gt;$broadcast('MyEvent')&lt;/<span style="color: #b58900;">button</span>&gt;
      &lt;<span style="color: #b58900;">br</span>&gt;
      Middle scope &lt;<span style="color: #b58900;">tt</span>&gt;<span style="color: #657b83; background-color: #fdf6e3;">MyEvent</span>&lt;/<span style="color: #b58900;">tt</span>&gt; count: 
      &lt;<span style="color: #b58900;">ul</span>&gt;
        &lt;<span style="color: #b58900;">li</span> <span style="color: #6c71c4;">ng-repeat</span>=<span style="color: #2aa198;">"item in [1, 2]"</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"EventController"</span>&gt;
          Leaf scope &lt;<span style="color: #b58900;">tt</span>&gt;<span style="color: #657b83; background-color: #fdf6e3;">MyEvent</span>&lt;/<span style="color: #b58900;">tt</span>&gt; count: 
        &lt;/<span style="color: #b58900;">li</span>&gt;
      &lt;/<span style="color: #b58900;">ul</span>&gt;
    &lt;/<span style="color: #b58900;">li</span>&gt;
  &lt;/<span style="color: #b58900;">ul</span>&gt;
&lt;/<span style="color: #b58900;">div</span>&gt;
</pre>
</div>

<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'eventExample'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>
.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'EventController'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  $scope.count = 0;
  $scope.$on<span style="color: #859900;">(</span><span style="color: #2aa198;">'MyEvent'</span>, <span style="color: #859900;">function</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
    $scope.count++;
  <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>

<p>
这个例子中,首先我们看JS的部分.这部分注册了一个EventController,这个
controller对于给定的上下文 <i>$scope</i> 设定属性 <i>count</i>,同时注册一个
名为 <i>MyEvent</i> 的事件,调用一个闭包函数对于当前上下文进行操作.
</p>

<p>
接下来看HTML,里面把同一个controller用了三次,也就意味着对于
eventExample,给予三个不同的 <i>$scope</i>.而这三个 <i>$scope</i> 各自拥有自
己的 <i>MyEvent</i> 函数副本.最后, <code>$emit('MyEvent')</code> 将调用这个函数的
动作传递给上层 <i>$scope</i>, <code>$broadcast('MyEvent')</code> 则传递给下层
<i>$scope</i>.
</p>

<p>
<i>$scope</i> 的生命周期中,模型的改变不会立即触发 <i>$watch</i>, 而是通过在
<i>$apply</i> 结束时的 <i>$digest</i> 来触发 <i>$watch</i>,这么做的好处在于将多个
改变合为一个 <i>$watch</i> 动作. 当子上下文不需要继续存在时,子上下文的
创建者负责调用 <i>scope.$destroy()</i> 负责停止事件传递,允许垃圾回收来
释放内存.
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Module &amp; Provider</h2>
<div class="outline-text-2" id="text-4">
<p>
angular.module会覆盖已存在的名字.模组提供 <i>provider</i>, <i>factory</i>,
<i>service</i>, <i>value</i>, <i>constant</i>, <i>animation</i>, <i>filter</i>,
<i>controller</i>, <i>directive</i>, <i>config</i>, <i>run</i> 这些方法.除了最后两个以
外,都是注册某一种功能.
<i>provider,factory,service,value,constant</i> 都是JS内部用的,
<i>directive,filter,animation,controller</i> 都是在html里面用
的(JS里面定义的).
</p>
<ul class="org-ul">
<li>JS
<ul class="org-ul">
<li>provider 提供一个在config阶段配置内容的机会,通过 <i>$get</i> 函数返
回绑定的对象.
</li>
<li>factory 注册一个名字空间,跟value类似,但是可以引用其它的服务
</li>
<li>service 注册一个类,用 <i>new</i> 来获得对象
</li>
<li>value 注册一个变量,也可以在变量下加入函数,但是不能引用其它的服务.
</li>
</ul>
</li>
<li>html
<ul class="org-ul">
<li>directive, 定义一个html元素,属性,类名,对相应的元素加入定义好的模块
</li>
<li>controller, 注册一个可在html里面引用的属性值,对相应元素中的变
量进行绑定和操作.
</li>
<li>animation, 动作效果
</li>
</ul>
</li>
<li>html and JS
<ul class="org-ul">
<li>filter, 过滤器. 返回一个过滤函数并绑定在这个名字上. 过滤函数接
受整个数组为第一个参数,还可以自定附加参数.
</li>
</ul>
</li>
</ul>

<p>
Provider是AngularJS的基础,Value,Factory,Service,Constant都建立在Provider之上.下
面的 <code>myApp.XXX</code> 方法实际上都是调用 <code>$provider.XXX</code>.
</p>
<ul class="org-ul">
<li>Value recipe
<div class="org-src-container">

<pre class="src src-javascript"><span style="color: #859900;">var</span> <span style="color: #6c71c4;">myApp</span> = angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'myApp'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>;
myApp.value<span style="color: #657b83;">(</span><span style="color: #2aa198;">'clientId'</span>, <span style="color: #2aa198;">'a12345654321x'</span><span style="color: #657b83;">)</span>;
myApp.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'DemoController'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'clientId'</span>, <span style="color: #859900;">function</span> DemoController<span style="color: #b58900;">(</span><span style="color: #6c71c4;">clientId</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  <span style="color: #268bd2;">this</span>.clientId = clientId;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">html</span> <span style="color: #6c71c4;">ng-app</span>=<span style="color: #2aa198;">"myApp"</span>&gt;
  &lt;<span style="color: #b58900;">body</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"DemoController as demo"</span>&gt;
    Client ID: 
  &lt;/<span style="color: #b58900;">body</span>&gt;
&lt;/<span style="color: #b58900;">html</span>&gt;
</pre>
</div>
<p>
其实就是定义一个模组下的变量/对象,可以是简单值,也可以在这个变量
下加入函数.
</p>
</li>
<li>Factory recipe
相对Value,可使用其他服务,初始化服务,惰性初始化. 使用 <code>myApp.factory</code>
方法.返回的是一系列变量,函数.
</li>
<li>Service recipe
使用 <code>myApp.service()</code> 方法,注册一个构造函数,得到一个类(class),
用 <i>new</i> 来得到新实例.返回的是构造函数.
</li>
<li>Provider Recipe
比Factory更高一层,能够让用户在使用服务之前进行定制化,用config函
数来实现.Provider里面有个 <code>$get</code> 方法,DI会把这个方法返回的东西绑
定到注册的Provider名字上.
<div class="org-src-container">

<pre class="src src-javascript">myApp.provider<span style="color: #657b83;">(</span><span style="color: #2aa198;">'AAA'</span>, <span style="color: #859900;">function</span> AAAProvider<span style="color: #2aa198;">(){</span>
    <span style="color: #268bd2;">this</span>.configFunc = <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">bla</span><span style="color: #b58900;">){</span>blabla<span style="color: #b58900;">}</span>;
    <span style="color: #268bd2;">this</span>.$get = <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">lab</span><span style="color: #b58900;">){</span> <span style="color: #859900;">return</span> BBB<span style="color: #b58900;">}</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
myApp.config<span style="color: #657b83;">(</span><span style="color: #859900;">function</span><span style="color: #2aa198;">(</span><span style="color: #6c71c4;">AAAProvider</span><span style="color: #2aa198;">){</span>
    AAAProvider.configFunc<span style="color: #b58900;">(</span>...<span style="color: #b58900;">)</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
myApp.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'CCC'</span>, <span style="color: #859900;">function</span><span style="color: #2aa198;">(</span><span style="color: #6c71c4;">AAA</span><span style="color: #2aa198;">){</span> <span style="color: #93a1a1; font-style: italic;">/*</span><span style="color: #93a1a1; font-style: italic;">AAA is BBB*/</span><span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
<i>provider</i> 只能在config里面,而在run里面,只能用非 <i>provider</i>.
</p>
</li>
<li>Constant Recipe
Constant在config和run的过程中都存在(在他们之前).用
<code>myApp.constant</code> 来注册.
</li>
<li>Special Purpose Objects
包括controller, directive, filter, animation.
</li>
</ul>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Service</h3>
<div class="outline-text-3" id="text-4-1">
<p>
服务都是惰性加载和单例,通过 <i>factory</i> 注册.服务本身对于html是不可
见的.在JS里面引用其功能.
除了用工厂方法意外,还可以在模组的config方法中通过 <i>$provie.factory</i> 来
注册服务.这里的Service和前面Provider段落中的不是一个概念.
</p>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Controller</h3>
<div class="outline-text-3" id="text-4-2">
<p>
控制器是用于连接上下文和服务的,通过 <i>controller</i> 注册,对于html可见,通
过 <i>ng-controller</i> 来进行绑定.本身也可以定义一些行为.不需要返回什
么东西.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Directive</h2>
<div class="outline-text-2" id="text-5">
<p>
Directive提供自己定义的HTML标记,基于AngularJS HTML compiler
(<code>$compile</code>). <i>ngApp</i>, <i>ngRepeat</i> 等等就是AngularJS自带的
directive,这些directive通过 <i>ng-app</i>, <i>ng-repeat</i> 标记在HTML文件中
改变元素的行为模式.当然,这里的compile并不是真正意义上的编
译,AngularJS只是将事件监听器绑定到HTML元素上,使得这些元素可以互动.
在 <code>$compile</code> 的API中可以找到directive的各种option的详细说明.
</p>

<p>
命名方面, <code>-,:,_</code> 都可以作为分隔符, <code>ng-model</code> 和 <code>ng:model</code> 是等
效的.同时还可以在前面加上 <code>x-</code> 或者 <code>data-</code> 前缀, <code>ng-model</code> 和
<code>data-ng:model</code> 是等效的.
</p>

<p>
使用directive可以将它作为tag name, attribute name, comment 或者
class name.
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">my-dir</span>&gt;&lt;/<span style="color: #b58900;">my-dir</span>&gt;
&lt;<span style="color: #b58900;">span</span> <span style="color: #6c71c4;">my-dir</span>=<span style="color: #2aa198;">"exp"</span>&gt;&lt;/<span style="color: #b58900;">span</span>&gt;
<span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">directive:my-dir exp</span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
&lt;<span style="color: #b58900;">span</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"my-dir: exp"</span>&gt;&lt;/<span style="color: #b58900;">span</span>&gt;
</pre>
</div>
<p>
以上三种标记方式是等效的.当然,推荐使用tag name和attribute name.
</p>

<p>
<i>ngAttr</i> 能够绕过浏览器限制使用AngularJS的表达式设定attribute.
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">circle</span> <span style="color: #6c71c4;">cx</span>=<span style="color: #2aa198;">""</span>&gt;&lt;/<span style="color: #b58900;">circle</span>&gt;
&lt;<span style="color: #b58900;">circle</span> <span style="color: #6c71c4;">ng-attr-cx</span>=<span style="color: #2aa198;">""</span>&gt;&lt;/<span style="color: #b58900;">circle</span>&gt;
&lt;<span style="color: #b58900;">svg</span> <span style="color: #6c71c4;">viewBox</span>=<span style="color: #2aa198;">""</span>&gt;&lt;/<span style="color: #b58900;">svg</span>&gt;
&lt;<span style="color: #b58900;">svg</span> <span style="color: #6c71c4;">ng-attr-view-box</span>=<span style="color: #2aa198;">""</span>&gt;&lt;/<span style="color: #b58900;">svg</span>&gt;
</pre>
</div>

<p>
<b>Directive返回固定的option.如果说Service(Factory)是注册名字和对应的属性,函数;Directive则是将值和函数绑定到预先定义好的选项</b>
</p>
</div>
<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 注册Directive</h3>
<div class="outline-text-3" id="text-5-1">
<p>
module.directive 函数注册directive,它接受一个名字和一个工厂方法.方
法返回template,用其填充directive元素的内容.
</p>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> restrict option</h3>
<div class="outline-text-3" id="text-5-2">
<p>
值为 &#8216;A&#8217; (match attribute), &#8216;E&#8217; (match element),
&#8216;C&#8217; (match class).指定这个directive被用作元素的属性,元素名或类
</p>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> link option</h3>
<div class="outline-text-3" id="text-5-3">
<p>
操作DOM.这个option需要指定一个函数,函数的参数为
scope (上下文),element (当前元素),attrs (当前元素的属性), ctrl
(array of controllers required by the directive).
</p>
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'docsTimeDirective'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>
.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'Controller'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  $scope.format = <span style="color: #2aa198;">'M/d/yy h:mm:ss a'</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>
.directive<span style="color: #657b83;">(</span><span style="color: #2aa198;">'myCurrentTime'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$interval'</span>, <span style="color: #2aa198;">'dateFilter'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$interval</span>, <span style="color: #6c71c4;">dateFilter</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>

  <span style="color: #859900;">function</span> <span style="color: #b58900;">link</span><span style="color: #859900;">(</span><span style="color: #6c71c4;">scope</span>, <span style="color: #6c71c4;">element</span>, <span style="color: #6c71c4;">attrs</span>, <span style="color: #6c71c4;">ctrl</span><span style="color: #859900;">)</span> <span style="color: #859900;">{</span>
    <span style="color: #859900;">var</span> <span style="color: #6c71c4;">format</span>,
        timeoutId;

    <span style="color: #859900;">function</span> <span style="color: #b58900;">updateTime</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
      element.text<span style="color: #657b83;">(</span>dateFilter<span style="color: #2aa198;">(</span><span style="color: #859900;">new</span> <span style="color: #268bd2;">Date</span><span style="color: #b58900;">()</span>, format<span style="color: #2aa198;">)</span><span style="color: #657b83;">)</span>;
    <span style="color: #268bd2;">}</span>

    scope.$watch<span style="color: #268bd2;">(</span>attrs.myCurrentTime, <span style="color: #859900;">function</span><span style="color: #657b83;">(</span><span style="color: #6c71c4;">value</span><span style="color: #657b83;">)</span> <span style="color: #657b83;">{</span>
      format = value;
      updateTime<span style="color: #2aa198;">()</span>;
    <span style="color: #657b83;">}</span><span style="color: #268bd2;">)</span>;

    element.on<span style="color: #268bd2;">(</span><span style="color: #2aa198;">'$destroy'</span>, <span style="color: #859900;">function</span><span style="color: #657b83;">()</span> <span style="color: #657b83;">{</span>
      $interval.cancel<span style="color: #2aa198;">(</span>timeoutId<span style="color: #2aa198;">)</span>;
    <span style="color: #657b83;">}</span><span style="color: #268bd2;">)</span>;

    <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">start the UI update process; save the timeoutId for canceling</span>
    timeoutId = $interval<span style="color: #268bd2;">(</span><span style="color: #859900;">function</span><span style="color: #657b83;">()</span> <span style="color: #657b83;">{</span>
      updateTime<span style="color: #2aa198;">()</span>; <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">update DOM</span>
    <span style="color: #657b83;">}</span>, 1000<span style="color: #268bd2;">)</span>;
  <span style="color: #859900;">}</span>

  <span style="color: #859900;">return</span> <span style="color: #859900;">{</span>
    link: link
  <span style="color: #859900;">}</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
设定函数 <i>updateTime</i> 直接操纵元素内容,通过 <i>$watch</i> 将元素中的属
性变动跟操作函数绑定在一起. 通过 <i>$interval</i> 来实现自动读秒更新时
间. 绑定 <i>$destroy</i> 来终止 <i>$interval</i> 读秒.
</p>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> isolate scope</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'docsIsolateScopeDirective'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>
.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'Controller'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  $scope.naomi = <span style="color: #859900;">{</span> name: <span style="color: #2aa198;">'Naomi'</span>, address: <span style="color: #2aa198;">'1600 Amphitheatre'</span> <span style="color: #859900;">}</span>;
  $scope.igor = <span style="color: #859900;">{</span> name: <span style="color: #2aa198;">'Igor'</span>, address: <span style="color: #2aa198;">'123 Somewhere'</span> <span style="color: #859900;">}</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>
.directive<span style="color: #657b83;">(</span><span style="color: #2aa198;">'myCustomer'</span>, <span style="color: #859900;">function</span><span style="color: #2aa198;">()</span> <span style="color: #2aa198;">{</span>
  <span style="color: #859900;">return</span> <span style="color: #b58900;">{</span>
    restrict: <span style="color: #2aa198;">'E'</span>,
    scope: <span style="color: #859900;">{</span>
      customerInfo: <span style="color: #2aa198;">'=info'</span>
    <span style="color: #859900;">}</span>,
    templateUrl: <span style="color: #2aa198;">'my-customer-iso.html'</span>
  <span style="color: #b58900;">}</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">div</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"Controller"</span>&gt;
  &lt;<span style="color: #b58900;">my-customer</span> <span style="color: #6c71c4;">info</span>=<span style="color: #2aa198;">"naomi"</span>&gt;&lt;/<span style="color: #b58900;">my-customer</span>&gt;
  &lt;<span style="color: #b58900;">hr</span>&gt;
  &lt;<span style="color: #b58900;">my-customer</span> <span style="color: #6c71c4;">info</span>=<span style="color: #2aa198;">"igor"</span>&gt;&lt;/<span style="color: #b58900;">my-customer</span>&gt;
&lt;/<span style="color: #b58900;">div</span>&gt;
</pre>
</div>
<p>
controller里面绑定了 <i>naomi</i> 和 <i>ingor</i> 的值,html里面将directive
元素中的 <i>info</i> 绑定为 <i>naomi</i> 或 <i>ingor</i>. directive里面定义独立
上下文,将 <i>customerInfo</i> 绑定到元素里的
<i>info</i>. my-customer-iso.html 里面引用 customerInfo 的内容. 如果要
引用 <code>&lt;div bind-to-this="thing"&gt;</code>,
在directive里面应该用
<code>=bindToThis</code>.如果isolate scope里的
属性名跟directive标签中的一样,则可以缩写为 <code>XXX:
'='</code>.
<b>注意:如同之前提到过的,isolate scope没有继承高级上下文的内容,在这
里面调用高级上下文中的变量,只能是空</b>
<b>template里面或者templateUrl引用的html里面的内容继承的是directive
的上下文</b>
</p>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> <i>transclude</i></h3>
<div class="outline-text-3" id="text-5-5">
<p>
给予外部上下文访问能力.同时也意味着之前isolate scope
被遮盖了,无法访问.
</p>
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'docsIsoFnBindExample'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>
.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'Controller'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #2aa198;">'$timeout'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span>, <span style="color: #6c71c4;">$timeout</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  $scope.name = <span style="color: #2aa198;">'Tobias'</span>;
  $scope.hideDialog = <span style="color: #859900;">function</span> <span style="color: #859900;">()</span> <span style="color: #859900;">{</span>
    $scope.dialogIsHidden = <span style="color: #268bd2;">true</span>;
    $timeout<span style="color: #268bd2;">(</span><span style="color: #859900;">function</span> <span style="color: #657b83;">()</span> <span style="color: #657b83;">{</span>
      $scope.dialogIsHidden = <span style="color: #268bd2;">false</span>;
    <span style="color: #657b83;">}</span>, 2000<span style="color: #268bd2;">)</span>;
  <span style="color: #859900;">}</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>
.directive<span style="color: #657b83;">(</span><span style="color: #2aa198;">'myDialog'</span>, <span style="color: #859900;">function</span><span style="color: #2aa198;">()</span> <span style="color: #2aa198;">{</span>
  <span style="color: #859900;">return</span> <span style="color: #b58900;">{</span>
    restrict: <span style="color: #2aa198;">'E'</span>,
    transclude: <span style="color: #268bd2;">true</span>,
    scope: <span style="color: #859900;">{</span>
      <span style="color: #2aa198;">'close'</span>: <span style="color: #2aa198;">'&amp;onClose'</span>
    <span style="color: #859900;">}</span>,
    templateUrl: <span style="color: #2aa198;">'&lt;div class="alert"&gt;&lt;a href class="close" ng-click="close()"&gt;&amp;times;&lt;/a&gt;&lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;'</span>
  <span style="color: #b58900;">}</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">div</span> <span style="color: #6c71c4;">ng-controller</span>=<span style="color: #2aa198;">"Controller"</span>&gt;
  &lt;<span style="color: #b58900;">my-dialog</span> <span style="color: #6c71c4;">ng-hide</span>=<span style="color: #2aa198;">"dialogIsHidden"</span> <span style="color: #6c71c4;">on-close</span>=<span style="color: #2aa198;">"hideDialog()"</span>&gt;
    Check out the contents, !
  &lt;/<span style="color: #b58900;">my-dialog</span>&gt;
&lt;/<span style="color: #b58900;">div</span>&gt;
</pre>
</div>
<p>
点击动作为<code>ng-click="close()"</code>,而
<code>close</code> 动作被绑定到 <code>&amp;onClose</code> 这个directive. <code>on-close</code> 又在
html里面绑定到 <code>hideDialog</code> 函数上. 这个示例中显示了如何将函数表
达式传递给directive,让directive在一定时候选择执行这个函数.scope中
读取值用&#8217;@XX&#8217;,读取表达式结果用&#8217;=XX&#8217;,读取表达式但不执行用&#8217;&amp;XX&#8217;.
</p>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> scope</h3>
<div class="outline-text-3" id="text-5-6">
<p>
不管是template还是templateUrl都是在directive的上下文下.当没有
isolate scope的时候,直接访问外部上下文.有isolate scope的时候,只能
访问isolate scope.这个时候html里面元素的内容,比如
<code>&lt;AA&gt;blabla&lt;/AA&gt;</code> 里面的 <i>blabla</i> 是被忽略/覆盖的.
当在template中加入一个含有transclude的元素的时候,html里面的
<i>blabla</i> 会被显示在这个元素之中,而这个含有transclude的元素的内容
却不会被显示,同时html里面的表达式无法访问isolate scope.
</p>
<div class="org-src-container">

<pre class="src src-javascript">...
<span style="color: #859900;">return</span> <span style="color: #657b83;">{</span>
    template: &lt;div&gt;CONTENT IN JAVASCRIPT <span style="color: #2aa198;">(</span>DIRECTIVE SCOPE <span style="color: #b58900;">(</span>OUTER/ISOLATE SCOPE<span style="color: #b58900;">)</span><span style="color: #2aa198;">)</span>&lt;/div&gt;&lt;div ng-transclude&gt;CONTENT FROM HTML <span style="color: #2aa198;">(</span>OUTER SCOPE<span style="color: #2aa198;">)</span>&lt;/div&gt;
<span style="color: #657b83;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> controller in directive.</h3>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Filters</h2>
<div class="outline-text-2" id="text-6">
<p>
在html里面用的时候 <code></code>
在JS里面使用一个叫做 filter 的过滤器
</p>
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'FilterInControllerModule'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>.
controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'FilterController'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'filterFilter'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">filterFilter</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
  <span style="color: #268bd2;">this</span>.array = <span style="color: #859900;">[</span>
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'Tobias'</span><span style="color: #268bd2;">}</span>,
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'Jeff'</span><span style="color: #268bd2;">}</span>,
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'Brian'</span><span style="color: #268bd2;">}</span>,
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'Igor'</span><span style="color: #268bd2;">}</span>,
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'James'</span><span style="color: #268bd2;">}</span>,
    <span style="color: #268bd2;">{</span>name: <span style="color: #2aa198;">'Brad'</span><span style="color: #268bd2;">}</span>
  <span style="color: #859900;">]</span>;
  <span style="color: #268bd2;">this</span>.filteredArray = filterFilter<span style="color: #859900;">(</span><span style="color: #268bd2;">this</span>.array, <span style="color: #2aa198;">'a'</span><span style="color: #859900;">)</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
创建过滤器
</p>
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'myReverseFilterApp'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>
.filter<span style="color: #657b83;">(</span><span style="color: #2aa198;">'reverse'</span>, <span style="color: #859900;">function</span><span style="color: #2aa198;">()</span> <span style="color: #2aa198;">{</span>
  <span style="color: #859900;">return</span> <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">input</span>, <span style="color: #6c71c4;">uppercase</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
    input = input || <span style="color: #2aa198;">''</span>;
    <span style="color: #859900;">var</span> <span style="color: #6c71c4;">out</span> = <span style="color: #2aa198;">""</span>;
    <span style="color: #859900;">for</span> <span style="color: #859900;">(</span><span style="color: #859900;">var</span> <span style="color: #6c71c4;">i</span> = 0; i &lt; input.length; i++<span style="color: #859900;">)</span> <span style="color: #859900;">{</span>
      out = input.charAt<span style="color: #268bd2;">(</span>i<span style="color: #268bd2;">)</span> + out;
    <span style="color: #859900;">}</span>
    <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">conditional based on optional argument</span>
    <span style="color: #859900;">if</span> <span style="color: #859900;">(</span>uppercase<span style="color: #859900;">)</span> <span style="color: #859900;">{</span>
      out = out.toUpperCase<span style="color: #268bd2;">()</span>;
    <span style="color: #859900;">}</span>
    <span style="color: #859900;">return</span> out;
  <span style="color: #b58900;">}</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>
</pre>
</div>
<p>
<code>$filter</code> 服务通过名字调用相应的过滤器.
</p>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Forms</h2>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Expressions</h2>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> HTML Compiler</h2>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Security</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> i18n and l10n</h2>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Accessibility</h2>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> Bootstrap</h2>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Running in Production</h2>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Animations</h2>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-12-24T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2014-12-24-angularjs-tutorial-.html" itemprop="url">AngularJS Tutorial 入门教程学习笔记</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 01和02,静态模板和AngularJS模板</a></li>
<li><a href="#sec-2">2. 03 迭代器</a></li>
<li><a href="#sec-3">3. 04双向绑定</a></li>
<li><a href="#sec-4">4. 05XHR和依赖注入</a></li>
<li><a href="#sec-5">5. 06链接与图片模板</a></li>
<li><a href="#sec-6">6. 07路由与多视图 &amp; 08更多模板</a></li>
<li><a href="#sec-7">7. 09过滤器</a></li>
<li><a href="#sec-8">8. 10事件</a></li>
<li><a href="#sec-9">9. 11Rest和定制服务</a></li>
<li><a href="#sec-10">10. 12 Animations</a></li>
</ul>
</div>
</div>
<p>
学习<a href="http://angularjs.cn/T006">AngularJS入门教程</a>, <a href="https://docs.angularjs.org/tutorial">英文版</a>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2014-12-24-angularjs-tutorial-.html"><span class="section-number-2">1</span> 01和02,静态模板和AngularJS模板</a></h2>
<div class="outline-text-2" id="text-1">
<p>
在HTML里面用np-app来定义Angular的上下文,可以用
<code>ng-app="AAA"</code> 来制定一个名字空间.JS中
通过这个名字来获取HTML里的上下文 <code>var AAA = angular.module('AAA',
   []);</code>.
</p>

<p>
在HTML中Angular的范围内,用
<code>ng-controller="BBB"</code>标记一个div,在里
面用一些Angular命令(ng-repeat)和表达式设定显示方式.在JS里面用
<code>AAA.controller('BBB',function ...)</code> 给Angular表达式中的域赋值.
</p>

<p>
<i>AAA</i> 中的 <code>$scope$</code> 是AAA的根作用域,控制器的作用域则在 <i>BBB</i> 之中.也
就是说,如果在AAA下面有多个 <i>controller</i>, <i>controller X</i> 的数据绑定
在 <i>controller Y</i> 下是无效的. <a href="http://docs.angularjs.org/api/ng.$rootScope.Scope">AngularJS作用域文档</a>.
</p>

<p>
略:AngularJS的开发者倾向于使用 <i>Jasmine</i> 行为驱动开发(BBD)框架进行
测试.
</p>

<p>
<i><b>写在后面,对angular.module是所有JS中创建,注册和获取模组的地方.HTML里
面通过ng-app=&#8221;AA&#8221;来绑定模组AA的上下文</b></i>
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 03 迭代器</h2>
<div class="outline-text-2" id="text-2">
<p>
建立输入表单 <code>&lt;input
ng-model="query"&gt;</code> ,修改 <code>ng-repeat</code> 为
<code>&lt;li ng-repeat="x in
list|filter:query"&gt;</code>.只要在输入框里输入文本,就会自动
地修改列表,只显示包含这个文本的项目.这代表两点:1. 数据绑定同名变量
query,值的同步是实时的; 2.filter过滤器,生成新数组,自动更新视图.
</p>

<p>
略:Angular端到端测试.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 04双向绑定</h2>
<div class="outline-text-2" id="text-3">
<p>
在HTML里面添加选择器
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">select</span> <span style="color: #6c71c4;">ng-model</span>=<span style="color: #2aa198;">"orderProp"</span>&gt;
  &lt;<span style="color: #b58900;">option</span> <span style="color: #6c71c4;">value</span>=<span style="color: #2aa198;">"name"</span>&gt;Alphabetical&lt;/<span style="color: #b58900;">option</span>&gt;
  &lt;<span style="color: #b58900;">option</span> <span style="color: #6c71c4;">value</span>=<span style="color: #2aa198;">"age"</span>&gt;Newest&lt;/<span style="color: #b58900;">option</span>&gt;
&lt;/<span style="color: #b58900;">select</span>&gt;
</pre>
</div>
<p>
同时在迭代器中加入条件
<code>&lt;li ng-repeat="phone in phones | filter:query |
orderBy:orderProp"&gt;</code>
</p>

<p>
JS中给每个数据加上 <i>age</i> 这个属性,同时设定
<code>$scope.orderProp = 'age'</code>设定选择器
的默认值.
</p>

<p>
<code>select</code> 的元素和 <code>orderProp</code> 之间建立了双向绑定.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 05XHR和依赖注入</h2>
<div class="outline-text-2" id="text-4">
<p>
通过 <code>$http.get(AA/BB.json)</code> 来读取json文件. <i>$http</i> 是AngularJS提
供的内建服务,通过依赖注入DI子系统.
</p>
<div class="org-src-container">

<pre class="src src-javascript">phonecatApp.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'PhoneListCtrl'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #2aa198;">'$http'</span>, <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span>, <span style="color: #6c71c4;">$http</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
    $http.get<span style="color: #859900;">(</span><span style="color: #2aa198;">'phones/phones.json'</span><span style="color: #859900;">)</span>.success<span style="color: #859900;">(</span><span style="color: #859900;">function</span><span style="color: #268bd2;">(</span><span style="color: #6c71c4;">data</span><span style="color: #268bd2;">)</span> <span style="color: #268bd2;">{</span>
        $scope.phones = data;
    <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>;
<span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 06链接与图片模板</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">ul</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"phones"</span>&gt;
  &lt;<span style="color: #b58900;">li</span> <span style="color: #6c71c4;">ng-repeat</span>=<span style="color: #2aa198;">"phone in phones | filter:query | orderBy:orderProp"</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"thumbnail"</span>&gt;
    &lt;<span style="color: #b58900;">a</span> <span style="color: #6c71c4;">href</span>=<span style="color: #2aa198;">"#/phones/"</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"thumb"</span>&gt;&lt;<span style="color: #b58900;">img</span> <span style="color: #6c71c4;">ng-src</span>=<span style="color: #2aa198;">""</span>&gt;&lt;/<span style="color: #b58900;">a</span>&gt;
    &lt;<span style="color: #b58900;">a</span> <span style="color: #6c71c4;">href</span>=<span style="color: #2aa198;">"#/phones/"</span>&gt;&lt;/<span style="color: #b58900;">a</span>&gt;
    &lt;<span style="color: #b58900;">p</span>&gt;&lt;/<span style="color: #b58900;">p</span>&gt;
  &lt;/<span style="color: #b58900;">li</span>&gt;
&lt;/<span style="color: #b58900;">ul</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 07路由与多视图 &amp; 08更多模板</h2>
<div class="outline-text-2" id="text-6">
<p>
用 <code>$routeProvider</code> 重定向url,把某个url路径定向到某个HTML模板上去,
并指定相对应的controller. <i>index.html</i> 中定义一个域,加载所有JS文件.加
载的 <i>app.js</i> 设定重定向规则.
</p>
<div class="org-src-container">

<pre class="src src-javascript">phonecatApp.config<span style="color: #657b83;">(</span><span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$routeProvider'</span>,
  <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$routeProvider</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
    $routeProvider.
      when<span style="color: #859900;">(</span><span style="color: #2aa198;">'/phones'</span>, <span style="color: #268bd2;">{</span>
        templateUrl: <span style="color: #2aa198;">'partials/phone-list.html'</span>,
        controller: <span style="color: #2aa198;">'PhoneListCtrl'</span>
      <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>.
      when<span style="color: #859900;">(</span><span style="color: #2aa198;">'/phones/:phoneId'</span>, <span style="color: #268bd2;">{</span>
        templateUrl: <span style="color: #2aa198;">'partials/phone-detail.html'</span>,
        controller: <span style="color: #2aa198;">'PhoneDetailCtrl'</span>
      <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>.
      otherwise<span style="color: #859900;">(</span><span style="color: #268bd2;">{</span>
        redirectTo: <span style="color: #2aa198;">'/phones'</span>
      <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>;
  <span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
<code>:phoneId</code> 是从将URL路径的对应部分作为变量.这个变量通过
<code>$routeParams</code> 来访问.
</p>

<p>
最后,在index.html里面加上 <code>&lt;div ng-view&gt;&lt;/div&gt;</code> 来为当前路由把对应
视图加上去.
</p>

<p>
<i>08更多模板</i> 之中用 <i>$http</i> 加载不同的json文件来根据phoneId生成每
部手机的细节说明网页.
</p>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 09过滤器</h2>
<div class="outline-text-2" id="text-7">
<p>
建立自己的 <i>filter FF</i>,实现更复杂的规则,然后像之前使用 <code>| filter:query</code>
一样用类似pipe的语法把输出传给自己的filter <code>| FF</code>.filter并不限定在
<i>ng-repeat</i> 中使用.
</p>
<div class="org-src-container">

<pre class="src src-javascript">angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'phonecatFilters'</span>, <span style="color: #2aa198;">[]</span><span style="color: #657b83;">)</span>.filter<span style="color: #657b83;">(</span><span style="color: #2aa198;">'checkmark'</span>, <span style="color: #859900;">function</span><span style="color: #2aa198;">()</span> <span style="color: #2aa198;">{</span>
  <span style="color: #859900;">return</span> <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">input</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
    <span style="color: #859900;">return</span> input ? <span style="color: #2aa198;">'</span><span style="color: #6c71c4;">\u</span><span style="color: #2aa198;">2713'</span> : <span style="color: #2aa198;">'</span><span style="color: #6c71c4;">\u</span><span style="color: #2aa198;">2718'</span>;
  <span style="color: #b58900;">}</span>;
<span style="color: #2aa198;">}</span><span style="color: #657b83;">)</span>;
</pre>
</div>

<p>
<a href="http://code.angularjs.org/1.1.0/docs/api/ng.$filter">AngularJS内置过滤器</a> <i>uppercase</i>, <i>json</i>, <i>date</i>,
<i>date:&#8221;MM/dd/yyy@ h:mma&#8221;</i>.
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 10事件</h2>
<div class="outline-text-2" id="text-8">
<p>
通过JS在上下文中定义函数,通过 <code>ng-click</code> 来设定点击事件,调用函数.
</p>
<div class="org-src-container">

<pre class="src src-javascript">phonecatControllers.controller<span style="color: #657b83;">(</span><span style="color: #2aa198;">'PhoneDetailCtrl'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$scope'</span>, <span style="color: #2aa198;">'$routeParams'</span>, <span style="color: #2aa198;">'$http'</span>,
  <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$scope</span>, <span style="color: #6c71c4;">$routeParams</span>, <span style="color: #6c71c4;">$http</span><span style="color: #b58900;">)</span> <span style="color: #b58900;">{</span>
    $http.get<span style="color: #859900;">(</span><span style="color: #2aa198;">'phones/'</span> + $routeParams.phoneId + <span style="color: #2aa198;">'.json'</span><span style="color: #859900;">)</span>.success<span style="color: #859900;">(</span><span style="color: #859900;">function</span><span style="color: #268bd2;">(</span><span style="color: #6c71c4;">data</span><span style="color: #268bd2;">)</span> <span style="color: #268bd2;">{</span>
      $scope.phone = data;
      $scope.mainImageUrl = data.images<span style="color: #657b83;">[</span>0<span style="color: #657b83;">]</span>;
    <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>;

    $scope.setImage = <span style="color: #859900;">function</span><span style="color: #859900;">(</span><span style="color: #6c71c4;">imageUrl</span><span style="color: #859900;">)</span> <span style="color: #859900;">{</span>
      $scope.mainImageUrl = imageUrl;
    <span style="color: #859900;">}</span>
  <span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
<code>$scope.setImage</code> 就是绑定的函数.
</p>
<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #b58900;">img</span> <span style="color: #6c71c4;">ng-src</span>=<span style="color: #2aa198;">""</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"phone"</span>&gt;

...

&lt;<span style="color: #b58900;">ul</span> <span style="color: #6c71c4;">class</span>=<span style="color: #2aa198;">"phone-thumbs"</span>&gt;
  &lt;<span style="color: #b58900;">li</span> <span style="color: #6c71c4;">ng-repeat</span>=<span style="color: #2aa198;">"img in phone.images"</span>&gt;
    &lt;<span style="color: #b58900;">img</span> <span style="color: #6c71c4;">ng-src</span>=<span style="color: #2aa198;">""</span> <span style="color: #6c71c4;">ng-click</span>=<span style="color: #2aa198;">"setImage(img)"</span>&gt;
  &lt;/<span style="color: #b58900;">li</span>&gt;
&lt;/<span style="color: #b58900;">ul</span>&gt;
</pre>
</div>
<p>
点击图片的时候调用函数,把 <code>mainImageUrl</code> 的值设定为当前图片.
</p>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 11Rest和定制服务</h2>
<div class="outline-text-2" id="text-9">
<p>
依赖为 <i>angular-resource/angular-resource.js</i>.一般我们的JS相应功能
命名为 <i>XXXService</i>.首先注册 <i>Service</i> 模块.
</p>
<div class="org-src-container">

<pre class="src src-javascript"><span style="color: #859900;">var</span> <span style="color: #6c71c4;">phonecatServices</span> = angular.module<span style="color: #657b83;">(</span><span style="color: #2aa198;">'phonecatServices'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'ngResource'</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;

phonecatServices.factory<span style="color: #657b83;">(</span><span style="color: #2aa198;">'Phone'</span>, <span style="color: #2aa198;">[</span><span style="color: #2aa198;">'$resource'</span>,
  <span style="color: #859900;">function</span><span style="color: #b58900;">(</span><span style="color: #6c71c4;">$resource</span><span style="color: #b58900;">){</span>
    <span style="color: #859900;">return</span> $resource<span style="color: #859900;">(</span><span style="color: #2aa198;">'phones/:phoneId.json'</span>, <span style="color: #268bd2;">{}</span>, <span style="color: #268bd2;">{</span>
      query: <span style="color: #657b83;">{</span>method:<span style="color: #2aa198;">'GET'</span>, params:<span style="color: #2aa198;">{</span>phoneId:<span style="color: #2aa198;">'phones'</span><span style="color: #2aa198;">}</span>, isArray:<span style="color: #268bd2;">true</span><span style="color: #657b83;">}</span>
    <span style="color: #268bd2;">}</span><span style="color: #859900;">)</span>;
  <span style="color: #b58900;">}</span><span style="color: #2aa198;">]</span><span style="color: #657b83;">)</span>;
</pre>
</div>
<p>
建立一个 <i>Phone</i> 工厂,用 <i>$resource</i> 来取得数据.相应的controller改
为<code>$scope.phone =
Phone.get({phoneId:$routeParams.phoneId})</code>和
<code>$scope.phones = Phone.query()</code>.
</p>

<p>
<code>query</code> 方法是自己声明和定义的 <code>query: {method:'GET', params:{phoneId:'phones'}, isArray:true}</code>.
</p>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> 12 Animations</h2>
<div class="outline-text-2" id="text-10">
<p>
TODO
</p>

<p>
更多的教程 <a href="http://angularjs.cn/tag/AngularJS_%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97">开发指南</a> 和 <a href="http://docs.angularjs.org/cookbook/index">Cookbook</a>. 推荐使用<a href="https://github.com/angular/angular-seed">AngularJS种子项目</a>来引导开发新项目
</p>
</div>
</div>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-12-22T00:00:00+01:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2014-12-22-.html" itemprop="url">背景知识</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. JSP</a>
<ul>
<li><a href="#sec-1-1">1.1. Servelet</a></li>
<li><a href="#sec-1-2">1.2. CGI 和 WSGI</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Tomcat + Apache</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="xiaoliuai.github.io/blog/2014-12-22-.html"><span class="section-number-2">1</span> JSP</a></h2>
<div class="outline-text-2" id="text-1">
<p>
JavaServer Page(JSP)是一种动态网页技术标准.在HTML中插入Java片段
(Scriptlet),以.jsp为文件后缀.在接到客户端请求的时候,服务器根据XXX.jsp文
件生成XXXServlet.java文件,然后编译运行,最后返回结果给客户端.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Servelet</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Servelet是一种 <i>独立于平台和协议</i> 的 <i>服务器端</i> 的Java应用程序,生
成动态页面.为HTTP客户端跟HTTP服务器程序的中间层.好处是快(比CGI快),
每个用户请求被激活成程序中的一个线程.Servlet是纯粹的Java,jsp介于
html和java质检,有助于美工人员来设计界面.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> CGI 和 WSGI</h3>
<div class="outline-text-3" id="text-1-2">
<p>
既然上一节提到了CGI,这里稍微展开一下.Common Gateway Interface
(CGI)是一种利用程序的标准输入,输出流来完成HTTP通信的方式.HTTP本身
是文本协议,请求是由服务器(Apache)处理,而应用程序可能由各种语言来实
现.CGI则将这个文本协议以标准输入流的方式传递给服务器端的CGI程序.
与之类似的还有WSGI,原理类似,但是是Python专用的协议.对于实现了
<i><span class="underline"><span class="underline">call</span></span></i> 的对象,将 <i>request</i> 经过包装作为参数传入,同时也返回进过
包装的 <i>response</i>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Tomcat + Apache</h2>
<div class="outline-text-2" id="text-2">
<p>
Apache和Tomcat都是提供服务器功能的软件.Apache可以使用
PHP,CGI,Perl,Tomcat在Apache后端提供对Java的支持.Apache+Tomcat处理
JSP的时候,Apache只是转发.Apache是Web服务器,Tomcat是应用服务器,是
Servlet容器,可以单独运行.
</p>

<p>
Tomcat是Servlet的容器,可以独立运行,也可以作为现有服务器的附加(支持
Apache,IIS,Netscape).配置Tomcat的时候选择运行模式.
</p>
</div>
</div>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/posts/2">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next disabled"><a href="#">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section>
  <div class="panel-heading">
    <h3 class="panel-title">About Me</h3>
        </div>
        <div class="list-group">
        <p class="list-group-item" style="text-align: center; max-height: 400px">
                <img src="/images/Me.png" height=150 width=Auto>
        </p>
        <p class="list-group-item">穷苦的科研狗一只</p>
        <p class="list-group-item"></p>
        </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2015-02-28-start-maven-example.html">Start Maven Example</a>
    
    <a class="list-group-item " href="/blog/2015-02-28-principles-of-reactive-programming-on-coursera.html">Principles of Reactive Programming on Coursera</a>
    
    <a class="list-group-item " href="/blog/2015-02-28-pom-configuration.html">POM Configuration</a>
    
    <a class="list-group-item " href="/blog/2015-02-28-functional-programming-on-coursera.html">Functional Programming on Coursera</a>
    
    <a class="list-group-item " href="/blog/2015-02-17-mongodb-strategy.html">Mongodb Strategy</a>
    
  </div>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Categories</h3>
  </div>
  <div class="list-group">
    
    
    <a class="list-group-item " href="/blog/categories/geek/index.html">
        <span class="badge">2</span>
        geek
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/parallelism/index.html">
        <span class="badge">1</span>
        parallelism
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/web/index.html">
        <span class="badge">5</span>
        web
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/database/index.html">
        <span class="badge">2</span>
        database
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/language/index.html">
        <span class="badge">2</span>
        language
      </a>
    
    
    <a class="list-group-item " href="/blog/categories/management/index.html">
        <span class="badge">2</span>
        management
      </a>
    
  </div>
</section>
<section class="panel panel-default">
    <div class="panel-heading">
            <h2 class="panel-title">标签列表</h2>
    </div>
    <ul class="list-group">
        <li class="tag-cloud list-group-item">
                <a style="font-size: 200%" href="/tags/maven/">maven<sup>3</sup></a>
<a style="font-size: 152%" href="/tags/angularjs/">AngularJS<sup>2</sup></a>
<a style="font-size: 152%" href="/tags/github/">GitHub<sup>2</sup></a>
<a style="font-size: 152%" href="/tags/scala/">Scala<sup>2</sup></a>
<a style="font-size: 152%" href="/tags/mongodb/">Mongodb<sup>2</sup></a>
<a style="font-size: 152%" href="/tags/org-mode/">Org-mode<sup>2</sup></a>
<a style="font-size: 70%" href="/tags/matlab/">Matlab<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/java/">Java<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/spring/">Spring<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/jekyll/">Jekyll<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/octave/">Octave<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/nodejs/">NodeJS<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/bower/">bower<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/yoeman/">yoeman<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/gulp/">gulp<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/mpi/">MPI<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/octopress/">Octopress<sup>1</sup></a>
<a style="font-size: 70%" href="/tags/javascript/">JavaScript<sup>1</sup></a>

        </li>
    </ul>
    <!-- <div class="list-group">
        <ul class="tag-cloud">
                <a style="font-size: 200%" href="/tags/maven/">maven<sup>3</sup></a>
<a style="font-size: 145%" href="/tags/angularjs/">AngularJS<sup>2</sup></a>
<a style="font-size: 145%" href="/tags/github/">GitHub<sup>2</sup></a>
<a style="font-size: 145%" href="/tags/scala/">Scala<sup>2</sup></a>
<a style="font-size: 145%" href="/tags/mongodb/">Mongodb<sup>2</sup></a>
<a style="font-size: 145%" href="/tags/org-mode/">Org-mode<sup>2</sup></a>
<a style="font-size: 50%" href="/tags/matlab/">Matlab<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/java/">Java<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/spring/">Spring<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/jekyll/">Jekyll<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/octave/">Octave<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/nodejs/">NodeJS<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/bower/">bower<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/yoeman/">yoeman<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/gulp/">gulp<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/mpi/">MPI<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/octopress/">Octopress<sup>1</sup></a>
<a style="font-size: 50%" href="/tags/javascript/">JavaScript<sup>1</sup></a>

        </ul>
    </div> &#8211;>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/xiaoliuai">@xiaoliuai</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'xiaoliuai',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - Xiao Liu<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
